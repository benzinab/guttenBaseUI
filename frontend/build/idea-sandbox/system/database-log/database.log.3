-- 2020-11-10 15:46:51 [testy2] [@localhost] [introspection] [session id: 1374497288] [statement id: 1889219231] results received
-- 2020-11-10 15:46:51 [testy2] [@localhost] [introspection] [session id: 1374497288] [statement id: 1889219231] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- 2020-11-10 15:46:51 [testy2] [@localhost] [session id: 1374497288] disconnected
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [session id: 1374497289] connected
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219232] 
select database()
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219232] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219232] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219233] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219233] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219233] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219234] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219234] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219234] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219235] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219235] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219235] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219236] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219236] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219236] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219237] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219237] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219237] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219238] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219238] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219238] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219239] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219239] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219239] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219240] 
select collation_name, character_set_name,
          is_default collate utf8_general_ci = 'Yes' as is_default
        from information_schema.collations
      
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219240] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219240] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219241] 
select grantee from information_schema.user_privileges group by grantee
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219241] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219241] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219242] 
show grants for 'debian-sys-maint'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219242] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219242] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219243] 
show grants for 'mysql.infoschema'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219243] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219243] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219244] 
show grants for 'mysql.session'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219244] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219244] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219245] 
show grants for 'mysql.sys'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219245] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219245] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219246] 
show grants for 'root'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219246] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219246] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219247] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219247] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219247] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219248] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219248] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219248] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219249] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219249] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219249] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219250] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219250] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219250] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219251] 
select table_name, table_type, table_comment, engine, table_collation
        from information_schema.tables
        where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219251] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219251] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219252] 
select
        ordinal_position,
        column_name,
        column_type,
        column_default,
        generation_expression,
        table_name,
        column_comment,
        is_nullable,
        extra,
        collation_name
      from information_schema.columns
      where table_schema = ?
      order by table_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219252] results received
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [introspection] [session id: 1374497289] [statement id: 1889219252] finished - execution time: 8 ms, fetching time: 7 ms, total result sets count: 1
-- 2020-11-10 15:49:09 [testy2] [MySQL1@localhost] [session id: 1374497289] disconnected
-- 2020-11-10 16:39:09 [testy2] [postgres@localhost] [session id: 226110930] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:39:09 [testy2] [postgres@localhost] [unknown] [session id: 226110930] [statement id: 1011936792] 
SELECT 'keep alive'
-- ] --------------------------------------------------
-- 2020-11-10 16:39:09 [testy2] [postgres@localhost] [unknown] [session id: 226110930] [statement id: 1011936792] finished - execution time: 4 ms
-- [ --------------------------------------------------
-- 2020-11-10 16:39:09 [testy2] [postgres@localhost] [unknown] [session id: 226110930] [statement id: 1011936793] 
select ssl from pg_stat_ssl where pid = pg_backend_pid()
-- ] --------------------------------------------------
-- 2020-11-10 16:39:09 [testy2] [postgres@localhost] [unknown] [session id: 226110930] [statement id: 1011936793] results received
-- 2020-11-10 16:39:09 [testy2] [postgres@localhost] [unknown] [session id: 226110930] [statement id: 1011936793] finished - execution time: 43 ms, fetching time: 6 ms, total result sets count: 1
-- 2020-11-10 16:39:09 [testy2] [postgres@localhost] [session id: 226110930] disconnected
-- 2020-11-10 16:45:13 [testy2] [database@localhost] [session id: 226110931] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:45:13 [testy2] [database@localhost] [unknown] [session id: 226110931] [statement id: 1011936794] 
SELECT 'keep alive'
-- ] --------------------------------------------------
-- 2020-11-10 16:45:13 [testy2] [database@localhost] [unknown] [session id: 226110931] [statement id: 1011936794] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-10 16:45:13 [testy2] [database@localhost] [unknown] [session id: 226110931] [statement id: 1011936795] 
select ssl from pg_stat_ssl where pid = pg_backend_pid()
-- ] --------------------------------------------------
-- 2020-11-10 16:45:13 [testy2] [database@localhost] [unknown] [session id: 226110931] [statement id: 1011936795] results received
-- 2020-11-10 16:45:13 [testy2] [database@localhost] [unknown] [session id: 226110931] [statement id: 1011936795] finished - execution time: 28 ms, fetching time: 4 ms, total result sets count: 1
-- 2020-11-10 16:45:13 [testy2] [database@localhost] [session id: 226110931] disconnected
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [session id: 226110932] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936796] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936796] results received
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936796] finished - execution time: 2 ms, fetching time: 60 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936797] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936797] results received
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936797] finished - execution time: 3 ms, fetching time: 17 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936798] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936798] results received
-- 2020-11-10 16:45:16 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936798] finished - execution time: 3 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936799] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936799] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936799] finished - execution time: 5 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936800] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936800] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936800] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936801] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936801] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936801] finished - execution time: 163 ms, fetching time: 14 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936802] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936802] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936802] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936803] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936803] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936803] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936804] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936804] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936804] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936805] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936805] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936805] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936806] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936806] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936806] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936807] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936807] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936807] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936808] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936808] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936808] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936809] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936809] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936809] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936810] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936810] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936810] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936811] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936811] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936811] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936812] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936812] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936812] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936813] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936813] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936813] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936814] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936814] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936814] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936815] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936815] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936815] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936816] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936816] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936816] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936817] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936817] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936817] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936818] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936818] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936818] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936819] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936819] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936819] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936820] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936820] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936820] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936821] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936821] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936821] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936822] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936822] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936822] finished - execution time: 13 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936823] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936823] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936823] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936824] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936824] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936824] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936825] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936825] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936825] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936826] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936826] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936826] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936827] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936827] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936827] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936828] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936828] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936828] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936829] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936829] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936829] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936830] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936830] results received
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936830] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:17 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936831] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936831] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936831] finished - execution time: 1 s 664 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936832] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936832] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936832] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936833] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936833] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936833] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936834] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936834] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936834] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936835] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936835] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936835] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936836] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936836] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936836] finished - execution time: 5 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936837] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936837] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936837] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936838] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936838] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936838] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936839] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936839] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936839] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936840] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936840] results received
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [introspection] [session id: 226110932] [statement id: 1011936840] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-10 16:45:19 [testy2] [database@localhost] [session id: 226110932] disconnected
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [session id: 226110933] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936841] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936841] results received
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936841] finished - execution time: 1 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936842] 
create database database2
-- ] --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936842] finished - execution time: 65 ms
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [session id: 226110934] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936843] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936843] results received
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936843] finished - execution time: 1 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936844] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936844] results received
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936844] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936845] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936845] results received
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936845] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:35 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936846] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936846] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936846] finished - execution time: 3 ms, fetching time: 67 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936847] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936847] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936847] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936848] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936848] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936848] finished - execution time: 98 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936849] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936849] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110934] [statement id: 1011936849] finished - execution time: 6 ms, fetching time: 9 ms, total result sets count: 1
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [session id: 226110934] disconnected
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [session id: 226110935] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936850] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936850] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936850] finished - execution time: 9 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936851] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936851] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936851] finished - execution time: 5 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936852] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936852] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936852] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936853] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936853] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936853] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936854] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936854] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936854] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936855] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936855] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936855] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936856] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936856] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936856] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936857] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936857] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936857] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936858] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936858] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936858] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936859] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936859] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936859] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936860] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936860] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936860] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936861] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936861] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936861] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936862] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936862] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936862] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936863] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936863] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936863] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936864] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936864] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936864] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936865] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936865] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936865] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936866] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936866] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936866] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936867] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936867] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936867] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936868] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936868] results received
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110935] [statement id: 1011936868] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- 2020-11-10 16:46:36 [testy2] [databasePostgres@localhost] [session id: 226110935] disconnected
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [session id: 226110936] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110936] [statement id: 1011936869] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110936] [statement id: 1011936869] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110936] [statement id: 1011936869] finished - execution time: 1 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110936] [statement id: 1011936870] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (2200)
*/
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110936] [statement id: 1011936870] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110936] [statement id: 1011936870] finished - execution time: 6 ms, fetching time: 5 ms, total result sets count: 1
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [session id: 226110936] disconnected
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936871] 
create table table_name
(
	column_1 int,
	column_2 int,
	column_3 int
)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936871] finished - execution time: 6 ms
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936872] 
set search_path = "public"
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [refactoring] [session id: 226110933] [statement id: 1011936872] finished - execution time: 1 ms
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [session id: 226110937] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936873] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936873] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936873] finished - execution time: 2 ms, fetching time: 19 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936874] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936874] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936874] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936875] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936875] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936875] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936876] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936876] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936876] finished - execution time: 6 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936877] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936877] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936877] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936878] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936878] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936878] finished - execution time: 108 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936879] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936879] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936879] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936880] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936880] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936880] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936881] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936881] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936881] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936882] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936882] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936882] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936883] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936883] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936883] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936884] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936884] results received
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936884] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936885] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:46:48 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936885] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936885] finished - execution time: 9 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936886] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936886] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936886] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936887] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936887] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936887] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936888] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936888] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936888] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936889] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936889] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936889] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936890] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936890] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936890] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936891] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936891] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936891] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936892] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936892] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936892] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936893] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936893] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936893] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936894] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936894] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936894] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936895] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936895] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936895] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936896] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936896] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936896] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936897] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936897] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936897] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936898] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936898] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936898] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936899] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936899] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936899] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936900] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936900] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936900] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936901] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936901] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936901] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936902] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936902] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936902] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936903] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936903] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936903] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936904] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936904] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936904] finished - execution time: 9 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936905] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936905] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936905] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936906] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936906] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936906] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936907] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936907] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936907] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936908] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936908] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936908] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936909] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936909] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936909] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936910] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936910] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936910] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936911] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936911] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936911] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936912] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936912] results received
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936912] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:49 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936913] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936913] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936913] finished - execution time: 1 s 22 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936914] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936914] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936914] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936915] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936915] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936915] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936916] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              --  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936916] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936916] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936917] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936917] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936917] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936918] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936918] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936918] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936919] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936919] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936919] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936920] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936920] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936920] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936921] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936921] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936921] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936922] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936922] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936922] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936923] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:src_tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936923] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936923] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936924] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936924] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936924] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936925] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936925] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936925] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936926] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936926] results received
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [introspection] [session id: 226110937] [statement id: 1011936926] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-10 16:46:50 [testy2] [databasePostgres@localhost] [session id: 226110937] disconnected
-- 2020-11-10 16:47:45 [testy2] [database2@localhost] [session id: 226110938] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:47:45 [testy2] [database2@localhost] [unknown] [session id: 226110938] [statement id: 1011936927] 
SELECT 'keep alive'
-- ] --------------------------------------------------
-- 2020-11-10 16:47:45 [testy2] [database2@localhost] [unknown] [session id: 226110938] [statement id: 1011936927] finished - execution time: 2 ms
-- [ --------------------------------------------------
-- 2020-11-10 16:47:46 [testy2] [database2@localhost] [unknown] [session id: 226110938] [statement id: 1011936928] 
select ssl from pg_stat_ssl where pid = pg_backend_pid()
-- ] --------------------------------------------------
-- 2020-11-10 16:47:46 [testy2] [database2@localhost] [unknown] [session id: 226110938] [statement id: 1011936928] results received
-- 2020-11-10 16:47:46 [testy2] [database2@localhost] [unknown] [session id: 226110938] [statement id: 1011936928] finished - execution time: 32 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-10 16:47:46 [testy2] [database2@localhost] [session id: 226110938] disconnected
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [session id: 226110939] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936929] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936929] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936929] finished - execution time: 2 ms, fetching time: 61 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936930] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936930] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936930] finished - execution time: 4 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936931] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936931] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936931] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936932] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936932] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936932] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936933] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936933] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936933] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936934] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936934] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936934] finished - execution time: 64 ms, fetching time: 23 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936935] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936935] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936935] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936936] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936936] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936936] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936937] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936937] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936937] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936938] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936938] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936938] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936939] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936939] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936939] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936940] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936940] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936940] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936941] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936941] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936941] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936942] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936942] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936942] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936943] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936943] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936943] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936944] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936944] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936944] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936945] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936945] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936945] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936946] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936946] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936946] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936947] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936947] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936947] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936948] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936948] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936948] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936949] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936949] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936949] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936950] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936950] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936950] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936951] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936951] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936951] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936952] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936952] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936952] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936953] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936953] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936953] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936954] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936954] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936954] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936955] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936955] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936955] finished - execution time: 14 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936956] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936956] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936956] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936957] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936957] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936957] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936958] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936958] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936958] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936959] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936959] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936959] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936960] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936960] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936960] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936961] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936961] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936961] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936962] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936962] results received
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936962] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936963] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-10 16:47:48 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936963] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936963] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936964] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936964] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936964] finished - execution time: 929 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936965] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936965] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936965] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936966] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936966] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936966] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936967] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936967] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936967] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936968] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936968] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936968] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936969] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936969] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936969] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936970] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936970] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936970] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936971] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936971] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936971] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936972] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936972] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936972] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936973] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936973] results received
-- 2020-11-10 16:47:49 [testy2] [database2@localhost] [introspection] [session id: 226110939] [statement id: 1011936973] finished - execution time: 2 ms, total result sets count: 1
-- 2020-11-10 16:47:50 [testy2] [database2@localhost] [session id: 226110939] disconnected
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [session id: 226110940] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936974] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936974] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936974] finished - execution time: 1 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936975] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936975] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936975] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936976] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936976] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936976] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936977] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936977] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936977] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936978] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936978] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936978] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936979] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936979] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936979] finished - execution time: 59 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936980] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936980] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936980] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936981] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936981] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936981] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936982] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936982] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936982] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936983] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936983] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936983] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936984] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936984] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936984] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936985] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936985] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936985] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936986] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936986] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936986] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936987] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936987] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936987] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936988] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936988] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936988] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936989] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936989] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936989] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936990] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936990] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936990] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936991] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936991] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936991] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936992] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936992] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936992] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936993] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936993] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936993] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936994] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936994] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936994] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936995] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936995] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936995] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936996] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936996] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936996] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936997] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936997] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936997] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936998] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936998] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936998] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936999] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936999] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011936999] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937000] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937000] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937000] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937001] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937001] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937001] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937002] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937002] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937002] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937003] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937003] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937003] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937004] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937004] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937004] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937005] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937005] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937005] finished - execution time: 7 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937006] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937006] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937006] finished - execution time: 46 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937007] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937007] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937007] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937008] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937008] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937008] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937009] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937009] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937009] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937010] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937010] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937010] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937011] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937011] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937011] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937012] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937012] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937012] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937013] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937013] results received
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937013] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:29 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937014] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937014] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937014] finished - execution time: 1 s, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937015] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937015] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937015] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937016] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937016] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937016] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937017] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937017] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937017] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937018] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937018] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937018] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937019] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937019] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937019] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937020] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937020] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937020] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937021] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937021] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937021] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937022] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937022] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937022] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937023] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937023] results received
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [introspection] [session id: 226110940] [statement id: 1011937023] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-10 16:48:30 [testy2] [database2@localhost] [session id: 226110940] disconnected
-- 2020-11-10 16:49:01 [testy2] [database@localhost] [session id: 226110941] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:49:01 [testy2] [database@localhost] [unknown] [session id: 226110941] [statement id: 1011937024] 
SELECT 'keep alive'
-- ] --------------------------------------------------
-- 2020-11-10 16:49:01 [testy2] [database@localhost] [unknown] [session id: 226110941] [statement id: 1011937024] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-10 16:49:01 [testy2] [database@localhost] [unknown] [session id: 226110941] [statement id: 1011937025] 
select ssl from pg_stat_ssl where pid = pg_backend_pid()
-- ] --------------------------------------------------
-- 2020-11-10 16:49:01 [testy2] [database@localhost] [unknown] [session id: 226110941] [statement id: 1011937025] results received
-- 2020-11-10 16:49:01 [testy2] [database@localhost] [unknown] [session id: 226110941] [statement id: 1011937025] finished - execution time: 26 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-10 16:49:01 [testy2] [database@localhost] [session id: 226110941] disconnected
-- 2020-11-10 16:49:02 [testy2] [database@localhost] [session id: 226110942] connected
-- [ --------------------------------------------------
-- 2020-11-10 16:49:02 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937026] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-10 16:49:02 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937026] results received
-- 2020-11-10 16:49:02 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937026] finished - execution time: 1 ms, fetching time: 40 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937027] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937027] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937027] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937028] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937028] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937028] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937029] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937029] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937029] finished - execution time: 3 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937030] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937030] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937030] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937031] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937031] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937031] finished - execution time: 80 ms, fetching time: 18 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937032] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937032] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937032] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937033] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937033] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937033] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937034] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937034] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937034] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937035] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937035] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937035] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937036] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937036] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937036] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937037] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937037] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937037] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937038] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937038] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937038] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937039] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937039] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937039] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937040] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937040] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937040] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937041] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937041] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937041] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937042] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937042] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937042] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937043] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937043] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937043] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937044] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937044] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937044] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937045] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937045] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937045] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937046] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937046] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937046] finished - execution time: 4 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937047] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937047] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937047] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937048] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937048] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937048] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937049] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937049] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937049] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937050] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937050] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937050] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937051] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937051] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937051] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937052] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937052] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937052] finished - execution time: 12 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937053] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937053] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937053] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937054] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937054] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937054] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937055] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937055] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937055] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937056] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937056] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937056] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937057] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937057] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937057] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937058] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937058] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937058] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937059] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937059] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937059] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937060] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937060] results received
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937060] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:03 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937061] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937061] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937061] finished - execution time: 1 s 124 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937062] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937062] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937062] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937063] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937063] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937063] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937064] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              --  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937064] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937064] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937065] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937065] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937065] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937066] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937066] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937066] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937067] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937067] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937067] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937068] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937068] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937068] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937069] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937069] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937069] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937070] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937070] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937070] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937071] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:src_tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937071] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937071] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937072] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937072] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937072] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937073] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937073] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937073] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937074] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937074] results received
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [introspection] [session id: 226110942] [statement id: 1011937074] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-10 16:49:04 [testy2] [database@localhost] [session id: 226110942] disconnected
-- 2020-11-10 16:49:12 [testy2] [databasePostgres@localhost] [session id: 226110933] disconnected
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [session id: 438242521] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242521] [statement id: 1801622461] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242521] [statement id: 1801622461] results received
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242521] [statement id: 1801622461] finished - execution time: 8 ms, fetching time: 77 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242521] [statement id: 1801622462] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (2200)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242521] [statement id: 1801622462] results received
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242521] [statement id: 1801622462] finished - execution time: 11 ms, fetching time: 30 ms, total result sets count: 1
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [session id: 438242521] disconnected
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [session id: 438242522] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [refactoring] [session id: 438242522] [statement id: 1801622463] 
create table table_name
(
)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:12 [testy2] [PsqlDatabase2@localhost] [refactoring] [session id: 438242522] [statement id: 1801622463] finished - execution time: 8 ms
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [session id: 438242523] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622464] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622464] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622464] finished - execution time: 1 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622465] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622465] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622465] finished - execution time: 8 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622466] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622466] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622466] finished - execution time: 7 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622467] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622467] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622467] finished - execution time: 6 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622468] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622468] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622468] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622469] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622469] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622469] finished - execution time: 155 ms, fetching time: 31 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622470] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622470] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622470] finished - execution time: 5 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622471] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622471] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622471] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622472] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622472] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622472] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622473] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622473] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622473] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622474] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622474] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622474] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622475] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622475] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622475] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622476] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622476] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622476] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622477] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622477] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622477] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622478] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622478] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622478] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622479] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622479] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622479] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622480] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622480] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622480] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622481] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622481] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622481] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622482] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622482] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622482] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622483] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622483] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622483] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622484] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622484] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622484] finished - execution time: 5 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622485] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622485] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622485] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622486] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622486] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622486] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622487] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622487] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622487] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622488] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622488] results received
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622488] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:13 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622489] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622489] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622489] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622490] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622490] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622490] finished - execution time: 16 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622491] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622491] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622491] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622492] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622492] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622492] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622493] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622493] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622493] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622494] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622494] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622494] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622495] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622495] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622495] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622496] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622496] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622496] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622497] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622497] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622497] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622498] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622498] results received
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622498] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:14 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622499] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622499] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622499] finished - execution time: 1 s 114 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622500] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622500] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622500] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622501] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622501] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622501] finished - execution time: 2 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622502] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              --  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622502] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622502] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622503] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622503] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622503] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622504] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622504] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622504] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622505] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622505] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622505] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622506] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622506] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622506] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622507] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622507] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622507] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622508] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622508] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622508] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622509] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:src_tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622509] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622509] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622510] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622510] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622510] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622511] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622511] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622511] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622512] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622512] results received
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 438242523] [statement id: 1801622512] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 16:07:15 [testy2] [PsqlDatabase2@localhost] [session id: 438242523] disconnected
-- 2020-11-11 16:08:58 [testy2] [PsqlDatabase2@localhost] [session id: 244510939] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:08:58 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510939] [statement id: 1017782088] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:08:58 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510939] [statement id: 1017782088] results received
-- 2020-11-11 16:08:58 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510939] [statement id: 1017782088] finished - execution time: 6 ms, fetching time: 79 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:58 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510939] [statement id: 1017782089] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (24576)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (24576)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (24576)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (24576)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:08:58 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510939] [statement id: 1017782089] results received
-- 2020-11-11 16:08:58 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510939] [statement id: 1017782089] finished - execution time: 7 ms, fetching time: 29 ms, total result sets count: 1
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [session id: 244510939] disconnected
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [session id: 244510940] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [refactoring] [session id: 244510940] [statement id: 1017782090] 
drop table table_name
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [refactoring] [session id: 244510940] [statement id: 1017782090] finished - execution time: 4 ms
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [session id: 244510941] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782091] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782091] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782091] finished - execution time: 3 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782092] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782092] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782092] finished - execution time: 4 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782093] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782093] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782093] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782094] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782094] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782094] finished - execution time: 5 ms, fetching time: 54 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782095] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782095] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782095] finished - execution time: 6 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782096] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782096] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782096] finished - execution time: 94 ms, fetching time: 22 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782097] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782097] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782097] finished - execution time: 4 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782098] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782098] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782098] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782099] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782099] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782099] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782100] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782100] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782100] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782101] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782101] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782101] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782102] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782102] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782102] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782103] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782103] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782103] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782104] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782104] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782104] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782105] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782105] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782105] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782106] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782106] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782106] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782107] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782107] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782107] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782108] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782108] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782108] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782109] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782109] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782109] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782110] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782110] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782110] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782111] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782111] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782111] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782112] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782112] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782112] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782113] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782113] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782113] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782114] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782114] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782114] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782115] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782115] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782115] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782116] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782116] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782116] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782117] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782117] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782117] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782118] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782118] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782118] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782119] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782119] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782119] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782120] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782120] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782120] finished - execution time: 3 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782121] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782121] results received
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782121] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:08:59 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782122] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782122] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782122] finished - execution time: 12 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782123] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782123] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782123] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782124] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782124] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782124] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782125] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782125] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782125] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782126] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782126] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782126] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782127] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782127] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782127] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782128] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782128] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782128] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782129] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782129] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782129] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782130] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782130] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782130] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782131] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782131] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782131] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782132] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782132] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782132] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782133] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782133] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782133] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782134] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  and pg_catalog.age(ft.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782134] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782134] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782135] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782135] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782135] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782136] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid)) ),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782136] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782136] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782137] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782137] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782137] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782138] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid) )
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782138] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782138] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782139] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782139] results received
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782139] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:00 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782140] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782140] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782140] finished - execution time: 1 s 91 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782141] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782141] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782141] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782142] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782142] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782142] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782143] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782143] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782143] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782144] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782144] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782144] finished - execution time: 7 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782145] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782145] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782145] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782146] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782146] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782146] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782147] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782147] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782147] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782148] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782148] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782148] finished - execution time: 8 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782149] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid) )
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782149] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782149] finished - execution time: 7 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782150] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782150] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782150] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782151] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
where pg_catalog.age(table_state_id) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(?::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782151] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782151] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782152] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782152] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782152] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782153] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782153] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782153] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782154] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782154] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782154] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782155] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782155] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782155] finished - execution time: 10 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782156] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782156] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782156] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782157] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  and (pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782157] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782157] finished - execution time: 7 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782158] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782158] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782158] finished - execution time: 9 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782159] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782159] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782159] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782160] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782160] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782160] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782161] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782161] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782161] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782162] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782162] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782162] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782163] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
          and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782163] results received
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510941] [statement id: 1017782163] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 16:09:01 [testy2] [PsqlDatabase2@localhost] [session id: 244510941] disconnected
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [session id: 244510942] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782164] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782164] results received
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782164] finished - execution time: 1 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782165] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782165] results received
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782165] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782166] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782166] results received
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782166] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782167] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782167] results received
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782167] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782168] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782168] results received
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782168] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782169] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:09:53 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782169] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782169] finished - execution time: 52 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782170] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782170] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782170] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782171] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782171] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782171] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782172] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782172] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782172] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782173] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782173] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782173] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782174] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782174] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782174] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782175] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782175] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782175] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782176] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782176] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782176] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782177] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782177] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782177] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782178] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782178] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782178] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782179] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782179] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782179] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782180] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782180] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782180] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782181] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782181] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782181] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782182] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782182] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782182] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782183] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782183] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782183] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782184] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782184] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782184] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782185] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782185] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782185] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782186] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782186] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782186] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782187] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782187] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782187] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782188] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782188] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782188] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782189] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782189] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782189] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782190] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782190] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782190] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782191] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782191] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782191] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782192] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782192] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782192] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782193] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782193] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782193] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782194] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782194] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782194] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782195] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782195] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782195] finished - execution time: 8 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782196] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782196] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782196] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782197] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782197] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782197] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782198] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782198] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782198] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782199] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782199] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782199] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782200] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782200] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782200] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782201] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782201] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782201] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782202] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782202] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782202] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782203] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782203] results received
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782203] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:54 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782204] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782204] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782204] finished - execution time: 1 s 61 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782205] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782205] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782205] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782206] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782206] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782206] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782207] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782207] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782207] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782208] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782208] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782208] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782209] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782209] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782209] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782210] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782210] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782210] finished - execution time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782211] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782211] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782211] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782212] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782212] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782212] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782213] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782213] results received
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 244510942] [statement id: 1017782213] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 16:09:55 [testy2] [PsqlDatabase2@localhost] [session id: 244510942] disconnected
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [session id: 244510943] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782214] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782214] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782214] finished - execution time: 4 ms, fetching time: 51 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782215] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782215] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782215] finished - execution time: 4 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782216] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782216] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782216] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782217] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782217] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782217] finished - execution time: 4 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782218] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782218] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782218] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782219] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782219] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782219] finished - execution time: 57 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782220] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782220] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782220] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782221] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782221] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782221] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782222] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782222] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782222] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782223] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782223] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782223] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782224] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782224] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782224] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782225] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782225] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782225] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782226] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782226] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782226] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782227] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782227] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782227] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782228] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782228] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782228] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782229] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782229] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782229] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782230] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782230] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782230] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782231] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782231] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782231] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782232] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782232] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782232] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782233] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782233] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782233] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782234] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782234] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782234] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782235] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782235] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782235] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782236] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782236] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782236] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782237] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782237] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782237] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782238] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782238] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782238] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782239] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782239] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782239] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782240] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782240] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782240] finished - execution time: 11 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782241] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782241] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782241] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782242] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782242] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782242] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782243] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782243] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782243] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782244] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782244] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782244] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782245] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782245] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782245] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782246] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782246] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782246] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782247] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782247] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782247] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782248] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782248] results received
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782248] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:09:59 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782249] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782249] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782249] finished - execution time: 1 s 35 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782250] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782250] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782250] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782251] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782251] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782251] finished - execution time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782252] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              --  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782252] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782252] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782253] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782253] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782253] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782254] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782254] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782254] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782255] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782255] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782255] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782256] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782256] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782256] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782257] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782257] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782257] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782258] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782258] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782258] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782259] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:src_tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782259] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782259] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782260] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782260] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782260] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782261] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782261] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782261] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782262] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782262] results received
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 244510943] [statement id: 1017782262] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 16:10:00 [testy2] [PsqlDatabase@localhost] [session id: 244510943] disconnected
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [session id: 2138966821] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966821] [statement id: 1052282588] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966821] [statement id: 1052282588] results received
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966821] [statement id: 1052282588] finished - execution time: 5 ms, fetching time: 75 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966821] [statement id: 1052282589] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (16389)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (16389)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (16389)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (16389)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966821] [statement id: 1052282589] results received
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966821] [statement id: 1052282589] finished - execution time: 7 ms, fetching time: 28 ms, total result sets count: 1
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [session id: 2138966821] disconnected
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [session id: 2138966822] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282590] 
drop table table_name cascade
-- ] --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282590] finished - execution time: 9 ms
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [session id: 2138966823] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282591] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282591] results received
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282591] finished - execution time: 2 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282592] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282592] results received
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282592] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282593] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282593] results received
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282593] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282594] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282594] results received
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282594] finished - execution time: 5 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:00 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282595] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282595] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282595] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282596] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282596] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282596] finished - execution time: 61 ms, fetching time: 27 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282597] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282597] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282597] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282598] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282598] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282598] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282599] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282599] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282599] finished - execution time: 2 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282600] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282600] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282600] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282601] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282601] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282601] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282602] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282602] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282602] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282603] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282603] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282603] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282604] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282604] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282604] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282605] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282605] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282605] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282606] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282606] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282606] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282607] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282607] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282607] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282608] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282608] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282608] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282609] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282609] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282609] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282610] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282610] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282610] finished - execution time: 2 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282611] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282611] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282611] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282612] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282612] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282612] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282613] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282613] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282613] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282614] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282614] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282614] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282615] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282615] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282615] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282616] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282616] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282616] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282617] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282617] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282617] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282618] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282618] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282618] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282619] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282619] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282619] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282620] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282620] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282620] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282621] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282621] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282621] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282622] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282622] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282622] finished - execution time: 15 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282623] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282623] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282623] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282624] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282624] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282624] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282625] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282625] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282625] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282626] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282626] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282626] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282627] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282627] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282627] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282628] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282628] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282628] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282629] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282629] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282629] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282630] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282630] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282630] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282631] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282631] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282631] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282632] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282632] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282632] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282633] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282633] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282633] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282634] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  and pg_catalog.age(ft.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282634] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282634] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282635] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282635] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282635] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282636] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid)) ),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282636] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282636] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282637] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282637] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282637] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282638] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid) )
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282638] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282638] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282639] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282639] results received
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282639] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:01 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282640] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282640] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282640] finished - execution time: 1 s 87 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282641] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282641] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282641] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282642] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282642] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282642] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282643] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282643] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282643] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282644] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282644] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282644] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282645] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282645] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282645] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282646] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282646] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282646] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282647] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282647] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282647] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282648] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282648] results received
-- 2020-11-11 16:12:02 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282648] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282649] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid) )
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282649] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282649] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282650] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282650] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282650] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282651] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
where pg_catalog.age(table_state_id) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(?::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282651] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282651] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282652] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282652] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282652] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282653] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282653] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282653] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282654] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282654] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282654] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282655] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282655] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282655] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282656] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282656] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282656] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282657] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  and (pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282657] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282657] finished - execution time: 9 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282658] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282658] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282658] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282659] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282659] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282659] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282660] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282660] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282660] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282661] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282661] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282661] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282662] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282662] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282662] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282663] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
          and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282663] results received
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966823] [statement id: 1052282663] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- 2020-11-11 16:12:03 [testy2] [PsqlDatabase@localhost] [session id: 2138966823] disconnected
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [session id: 2138966824] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966824] [statement id: 1052282664] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966824] [statement id: 1052282664] results received
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966824] [statement id: 1052282664] finished - execution time: 1 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966824] [statement id: 1052282665] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (2200)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966824] [statement id: 1052282665] results received
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966824] [statement id: 1052282665] finished - execution time: 8 ms, fetching time: 6 ms, total result sets count: 1
-- 2020-11-11 16:12:16 [testy2] [PsqlDatabase@localhost] [session id: 2138966824] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282666] 
create table table_name
(
	column_1 int,
	column_2 int,
	column_3 int
)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282666] finished - execution time: 10 ms
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [session id: 2138966825] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282667] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282667] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282667] finished - execution time: 1 ms, fetching time: 15 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282668] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282668] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282668] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282669] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282669] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282669] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282670] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282670] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282670] finished - execution time: 6 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282671] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282671] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282671] finished - execution time: 14 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282672] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282672] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282672] finished - execution time: 111 ms, fetching time: 14 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282673] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282673] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282673] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282674] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282674] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282674] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282675] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282675] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282675] finished - execution time: 3 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282676] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282676] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282676] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282677] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282677] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282677] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282678] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282678] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282678] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282679] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282679] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282679] finished - execution time: 10 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282680] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282680] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282680] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282681] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282681] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282681] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282682] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282682] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282682] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282683] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282683] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282683] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282684] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282684] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282684] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282685] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282685] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282685] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282686] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282686] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282686] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282687] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282687] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282687] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282688] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282688] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282688] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282689] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282689] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282689] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282690] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282690] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282690] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282691] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282691] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282691] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282692] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282692] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282692] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282693] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282693] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282693] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282694] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282694] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282694] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282695] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282695] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282695] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282696] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282696] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282696] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282697] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282697] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282697] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282698] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282698] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282698] finished - execution time: 9 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282699] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282699] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282699] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282700] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282700] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282700] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282701] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282701] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282701] finished - execution time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282702] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282702] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282702] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282703] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282703] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282703] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282704] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282704] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282704] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282705] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282705] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282705] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282706] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282706] results received
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282706] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282707] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282707] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282707] finished - execution time: 1 s 43 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282708] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282708] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282708] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282709] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282709] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282709] finished - execution time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282710] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              --  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282710] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282710] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282711] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282711] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282711] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282712] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282712] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282712] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282713] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282713] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282713] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282714] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282714] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282714] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282715] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282715] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282715] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282716] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282716] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282716] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282717] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:src_tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282717] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282717] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282718] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282718] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282718] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282719] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282719] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282719] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282720] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282720] results received
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966825] [statement id: 1052282720] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 16:12:18 [testy2] [PsqlDatabase@localhost] [session id: 2138966825] disconnected
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [session id: 2138966826] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966826] [statement id: 1052282721] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966826] [statement id: 1052282721] results received
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966826] [statement id: 1052282721] finished - execution time: 1 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966826] [statement id: 1052282722] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (24579, 2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (24579, 2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (24579, 2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (24579, 2200)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966826] [statement id: 1052282722] results received
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966826] [statement id: 1052282722] finished - execution time: 9 ms, fetching time: 9 ms, total result sets count: 1
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [session id: 2138966826] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282723] 
alter table table_name rename to table_name1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282723] finished - execution time: 7 ms
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [session id: 2138966827] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282724] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282724] results received
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282724] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:29 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282725] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282725] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282725] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282726] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282726] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282726] finished - execution time: 7 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282727] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282727] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282727] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282728] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282728] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282728] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282729] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282729] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282729] finished - execution time: 106 ms, fetching time: 19 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282730] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282730] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282730] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282731] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282731] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282731] finished - execution time: 8 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282732] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282732] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282732] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282733] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282733] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282733] finished - execution time: 2 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282734] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282734] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282734] finished - execution time: 6 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282735] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282735] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282735] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282736] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282736] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282736] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282737] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282737] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282737] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282738] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282738] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282738] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282739] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282739] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282739] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282740] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282740] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282740] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282741] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282741] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282741] finished - execution time: 7 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282742] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282742] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282742] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282743] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282743] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282743] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282744] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282744] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282744] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282745] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282745] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282745] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282746] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282746] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282746] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282747] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282747] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282747] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282748] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282748] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282748] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282749] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282749] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282749] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282750] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282750] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282750] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282751] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282751] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282751] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282752] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282752] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282752] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282753] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282753] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282753] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282754] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282754] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282754] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282755] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282755] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282755] finished - execution time: 13 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282756] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282756] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282756] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282757] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282757] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282757] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282758] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282758] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282758] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282759] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282759] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282759] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282760] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282760] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282760] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282761] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282761] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282761] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282762] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282762] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282762] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282763] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282763] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282763] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282764] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282764] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282764] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282765] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282765] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282765] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282766] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282766] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282766] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282767] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  and pg_catalog.age(ft.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282767] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282767] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282768] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282768] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282768] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282769] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid)) ),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282769] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282769] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282770] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282770] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282770] finished - execution time: 1 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282771] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid) )
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282771] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282771] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282772] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282772] results received
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282772] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:30 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282773] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282773] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282773] finished - execution time: 1 s 88 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282774] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282774] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282774] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282775] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282775] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282775] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282776] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282776] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282776] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282777] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282777] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282777] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282778] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282778] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282778] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282779] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282779] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282779] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282780] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282780] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282780] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282781] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282781] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282781] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282782] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282782] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282782] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282783] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid) )
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282783] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282783] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282784] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282784] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282784] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282785] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
where pg_catalog.age(table_state_id) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(?::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282785] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282785] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282786] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282786] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282786] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282787] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  and pg_catalog.age(R.xmin) <= pg_catalog.age(?::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282787] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282787] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282788] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282788] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282788] finished - execution time: 1 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282789] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282789] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282789] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282790] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282790] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282790] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282791] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282791] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282791] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282792] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282792] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282792] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282793] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  and (pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282793] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282793] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282794] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282794] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282794] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282795] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  and pg_catalog.age(R.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282795] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282795] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282796] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282796] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282796] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282797] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282797] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282797] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282798] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282798] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282798] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282799] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282799] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282799] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282800] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
          and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282800] results received
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966827] [statement id: 1052282800] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 16:12:31 [testy2] [PsqlDatabase@localhost] [session id: 2138966827] disconnected
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [session id: 2138966828] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [refactoring] [session id: 2138966828] [statement id: 1052282801] 
create schema public
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [refactoring] [session id: 2138966828] [statement id: 1052282801] finished - execution time: 8 ms
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [session id: 2138966829] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282802] 
select database()
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282802] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282802] finished - execution time: 51 ms, fetching time: 28 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282803] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282803] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282803] finished - execution time: 4 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282804] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282804] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282804] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282805] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282805] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282805] finished - execution time: 9 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282806] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282806] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282806] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282807] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282807] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282807] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282808] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282808] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282808] finished - execution time: 2 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282809] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282809] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282809] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282810] 
select collation_name, character_set_name,
          is_default collate utf8_general_ci = 'Yes' as is_default
        from information_schema.collations
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282810] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282810] finished - execution time: 7 ms, fetching time: 15 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282811] 
select grantee from information_schema.user_privileges group by grantee
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282811] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282811] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282812] 
show grants for 'debian-sys-maint'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282812] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282812] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282813] 
show grants for 'mysql.infoschema'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282813] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282813] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282814] 
show grants for 'mysql.session'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282814] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282814] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282815] 
show grants for 'mysql.sys'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282815] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282815] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282816] 
show grants for 'root'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282816] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282816] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282817] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282817] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282817] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282818] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282818] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282818] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282819] 
select table_name, table_type, table_comment, engine, table_collation
        from information_schema.tables
        where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282819] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282819] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282820] 
select
        ordinal_position,
        column_name,
        column_type,
        column_default,
        generation_expression,
        table_name,
        column_comment,
        is_nullable,
        extra,
        collation_name
      from information_schema.columns
      where table_schema = ?
      order by table_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282820] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282820] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282821] 
select
          table_name,
          index_name,
          index_comment,
          index_type,
          non_unique,
          column_name,
          collation,
          expression
        from information_schema.statistics
        where table_schema = ? and
              index_schema = ? and
              index_name collate utf8_general_ci <> 'PRIMARY'
        order by
          index_schema,
          table_name,
          index_name,
          seq_in_index
        
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282821] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282821] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282822] 
select
        c.constraint_name,
        c.table_name,
        c.constraint_type,
        r.match_option,
        r.update_rule,
        r.delete_rule
      from information_schema.table_constraints c
        left join information_schema.referential_constraints r on
            r.constraint_schema   = c.constraint_schema
        and r.constraint_name     = c.constraint_name
      where c.table_schema = ?
    
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282822] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282822] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282823] 
select
        constraint_name,
        table_name,
        column_name,
        referenced_table_schema,
        referenced_table_name,
        referenced_column_name
      from information_schema.key_column_usage
      where table_schema = ?
      order by
          table_name
        , constraint_name
        , ordinal_position
    
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282823] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282823] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282824] 
select
          trigger_name,
          event_object_table,
          event_manipulation,
          action_timing,
          definer
        from information_schema.triggers
        where trigger_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282824] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282824] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282825] 
select
          event_name,
          event_comment,
          definer,
          event_type = 'RECURRING' recurring,
          interval_value,
          interval_field,
          cast(coalesce(starts, execute_at) as char) starts,
          cast(ends as char) ends,
          status,
          on_completion = 'PRESERVE' preserve,
          last_executed
        from information_schema.events
        where event_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282825] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282825] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282826] 
select
          routine_name,
          routine_type,
          routine_definition,
          routine_comment,
          dtd_identifier,
          definer
        from information_schema.routines
        where routine_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282826] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282826] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282827] 
select specific_name,
        ordinal_position,
        parameter_name,
        parameter_mode,
        dtd_identifier
      from information_schema.parameters
      where specific_schema = ? and ordinal_position > 0
      order by specific_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282827] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282827] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282828] 
select table_name, view_definition, definer
      from information_schema.views
      where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282828] results received
-- 2020-11-11 16:13:15 [testy2] [MySQL1@localhost] [introspection] [session id: 2138966829] [statement id: 1052282828] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 16:13:16 [testy2] [MySQL1@localhost] [session id: 2138966829] disconnected
-- 2020-11-11 16:20:56 [testy2] [PsqlDatabase@localhost] [session id: 2138966830] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966830] [statement id: 1052282829] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966830] [statement id: 1052282829] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966830] [statement id: 1052282829] finished - execution time: 1 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966830] [statement id: 1052282830] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (24579)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (24579)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (24579)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (24579)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966830] [statement id: 1052282830] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966830] [statement id: 1052282830] finished - execution time: 8 ms, fetching time: 10 ms, total result sets count: 1
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [session id: 2138966830] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282831] 
drop table table_name1
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 2138966822] [statement id: 1052282831] finished - execution time: 17 ms
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [session id: 2138966831] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282832] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282832] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282832] finished - execution time: 1 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282833] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282833] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282833] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282834] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282834] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282834] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282835] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282835] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282835] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282836] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282836] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282836] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282837] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282837] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282837] finished - execution time: 55 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282838] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282838] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282838] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282839] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282839] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282839] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282840] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282840] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282840] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282841] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282841] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282841] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282842] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282842] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282842] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282843] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282843] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282843] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282844] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282844] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282844] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282845] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282845] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282845] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282846] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282846] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282846] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282847] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282847] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282847] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282848] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282848] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282848] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282849] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282849] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282849] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282850] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282850] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282850] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282851] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282851] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282851] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282852] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282852] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282852] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282853] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282853] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282853] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282854] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282854] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282854] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282855] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282855] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282855] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282856] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282856] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282856] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282857] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282857] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282857] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282858] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282858] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282858] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282859] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282859] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282859] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282860] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282860] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282860] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282861] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282861] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282861] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282862] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282862] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282862] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282863] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282863] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282863] finished - execution time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282864] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282864] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282864] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282865] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282865] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282865] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282866] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282866] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282866] finished - execution time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282867] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282867] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282867] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282868] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282868] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282868] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282869] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282869] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282869] finished - execution time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282870] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282870] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282870] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282871] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282871] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282871] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282872] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282872] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282872] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282873] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282873] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282873] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282874] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282874] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282874] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282875] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  and pg_catalog.age(ft.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282875] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282875] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282876] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282876] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282876] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282877] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid)) ),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282877] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282877] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282878] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282878] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282878] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282879] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid) )
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282879] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282879] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282880] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282880] results received
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282880] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:57 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282881] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282881] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282881] finished - execution time: 971 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282882] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282882] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282882] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282883] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282883] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282883] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282884] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282884] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282884] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282885] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282885] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282885] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282886] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282886] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282886] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282887] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282887] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282887] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282888] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282888] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282888] finished - execution time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282889] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282889] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282889] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282890] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid) )
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282890] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282890] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282891] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282891] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282891] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282892] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
where pg_catalog.age(table_state_id) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(?::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282892] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282892] finished - execution time: 7 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282893] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282893] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282893] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282894] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282894] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282894] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282895] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282895] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282895] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282896] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282896] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282896] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282897] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282897] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282897] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282898] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  and (pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282898] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282898] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282899] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282899] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282899] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282900] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282900] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282900] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282901] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282901] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282901] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282902] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282902] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282902] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282903] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282903] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282903] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282904] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
          and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282904] results received
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 2138966831] [statement id: 1052282904] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 16:20:58 [testy2] [PsqlDatabase@localhost] [session id: 2138966831] disconnected
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [session id: 823498518] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498518] [statement id: 1311718881] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498518] [statement id: 1311718881] results received
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498518] [statement id: 1311718881] finished - execution time: 7 ms, fetching time: 62 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498518] [statement id: 1311718882] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (2200)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498518] [statement id: 1311718882] results received
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498518] [statement id: 1311718882] finished - execution time: 6 ms, fetching time: 25 ms, total result sets count: 1
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [session id: 823498518] disconnected
-- 2020-11-11 16:22:49 [testy2] [PsqlDatabase@localhost] [session id: 823498519] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 823498519] [statement id: 1311718883] 
create table table_name
(
	column_1 int,
	column_2 int,
	column_3 int
)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 823498519] [statement id: 1311718883] finished - execution time: 17 ms
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [session id: 823498520] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718884] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718884] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718884] finished - execution time: 2 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718885] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718885] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718885] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718886] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718886] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718886] finished - execution time: 4 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718887] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718887] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718887] finished - execution time: 5 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718888] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718888] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718888] finished - execution time: 6 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718889] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718889] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718889] finished - execution time: 89 ms, fetching time: 22 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718890] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718890] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718890] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718891] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718891] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718891] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718892] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718892] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718892] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718893] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718893] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718893] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718894] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718894] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718894] finished - execution time: 4 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718895] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718895] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718895] finished - execution time: 8 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718896] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718896] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718896] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718897] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718897] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718897] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718898] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718898] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718898] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718899] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718899] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718899] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718900] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718900] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718900] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718901] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718901] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718901] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718902] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718902] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718902] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718903] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718903] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718903] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718904] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718904] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718904] finished - execution time: 4 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718905] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718905] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718905] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718906] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718906] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718906] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718907] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718907] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718907] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718908] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718908] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718908] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718909] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718909] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718909] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718910] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718910] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718910] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718911] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718911] results received
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718911] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718912] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718912] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718912] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718913] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718913] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718913] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718914] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718914] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718914] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718915] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718915] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718915] finished - execution time: 15 ms, fetching time: 26 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718916] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718916] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718916] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718917] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718917] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718917] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718918] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718918] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718918] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718919] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718919] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718919] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718920] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718920] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718920] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718921] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718921] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718921] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718922] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718922] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718922] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718923] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718923] results received
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718923] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718924] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718924] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718924] finished - execution time: 1 s 131 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718925] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718925] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718925] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718926] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718926] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718926] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718927] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              --  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718927] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718927] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718928] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718928] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718928] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718929] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718929] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718929] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718930] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718930] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718930] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718931] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718931] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718931] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718932] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
