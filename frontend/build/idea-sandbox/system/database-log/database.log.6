-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718932] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718932] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718933] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718933] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718933] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718934] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:src_tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718934] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718934] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718935] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718935] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718935] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718936] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718936] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718936] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718937] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718937] results received
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 823498520] [statement id: 1311718937] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- 2020-11-11 16:22:52 [testy2] [PsqlDatabase@localhost] [session id: 823498520] disconnected
-- 2020-11-11 16:26:55 [testy2] [@localhost] [session id: 87974322] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:26:56 [testy2] [@localhost] [unknown] [session id: 87974322] [statement id: 629204789] 
SELECT 'keep alive'
-- ] --------------------------------------------------
-- 2020-11-11 16:26:56 [testy2] [@localhost] [unknown] [session id: 87974322] [statement id: 629204789] finished - execution time: 4 ms
-- [ --------------------------------------------------
-- 2020-11-11 16:26:56 [testy2] [@localhost] [unknown] [session id: 87974322] [statement id: 629204790] 
show status like 'ssl_version'
-- ] --------------------------------------------------
-- 2020-11-11 16:26:56 [testy2] [@localhost] [unknown] [session id: 87974322] [statement id: 629204790] results received
-- 2020-11-11 16:26:56 [testy2] [@localhost] [unknown] [session id: 87974322] [statement id: 629204790] finished - execution time: 42 ms, fetching time: 10 ms, total result sets count: 1
-- 2020-11-11 16:26:56 [testy2] [@localhost] [session id: 87974322] disconnected
-- 2020-11-11 16:27:10 [testy2] [@localhost] [session id: 87974323] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:27:10 [testy2] [@localhost] [introspection] [session id: 87974323] [statement id: 629204791] 
SHOW DATABASES
-- ] --------------------------------------------------
-- 2020-11-11 16:27:11 [testy2] [@localhost] [introspection] [session id: 87974323] [statement id: 629204791] results received
-- 2020-11-11 16:27:11 [testy2] [@localhost] [introspection] [session id: 87974323] [statement id: 629204791] finished - execution time: 28 ms, fetching time: 8 ms, total result sets count: 1
-- 2020-11-11 16:27:11 [testy2] [@localhost] [session id: 87974323] disconnected
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [session id: 87974324] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [refactoring] [session id: 87974324] [statement id: 629204792] 
create schema public
-- ] --------------------------------------------------
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [refactoring] [session id: 87974324] [statement id: 629204792] error - [HY000][1007] Can't create database 'public'; database exists
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [refactoring] [session id: 87974324] [statement id: 629204792] finished - execution time: 36 ms
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [refactoring] [session id: 87974324] warning - [HY000][1007] Can't create database 'public'; database exists
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [session id: 87974325] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204793] 
select database()
-- ] --------------------------------------------------
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204793] results received
-- 2020-11-11 16:28:38 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204793] finished - execution time: 38 ms, fetching time: 31 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204794] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204794] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204794] finished - execution time: 4 ms, fetching time: 17 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204795] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204795] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204795] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204796] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204796] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204796] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204797] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204797] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204797] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204798] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204798] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204798] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204799] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204799] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204799] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204800] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204800] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204800] finished - execution time: 3 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204801] 
select collation_name, character_set_name,
          is_default collate utf8_general_ci = 'Yes' as is_default
        from information_schema.collations
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204801] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204801] finished - execution time: 5 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204802] 
select grantee from information_schema.user_privileges group by grantee
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204802] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204802] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204803] 
show grants for 'debian-sys-maint'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204803] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204803] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204804] 
show grants for 'mysql.infoschema'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204804] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204804] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204805] 
show grants for 'mysql.session'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204805] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204805] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204806] 
show grants for 'mysql.sys'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204806] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204806] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204807] 
show grants for 'root'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204807] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204807] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204808] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204808] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204808] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204809] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204809] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204809] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204810] 
select table_name, table_type, table_comment, engine, table_collation
        from information_schema.tables
        where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204810] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204810] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204811] 
select
        ordinal_position,
        column_name,
        column_type,
        column_default,
        generation_expression,
        table_name,
        column_comment,
        is_nullable,
        extra,
        collation_name
      from information_schema.columns
      where table_schema = ?
      order by table_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204811] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204811] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204812] 
select
          table_name,
          index_name,
          index_comment,
          index_type,
          non_unique,
          column_name,
          collation,
          expression
        from information_schema.statistics
        where table_schema = ? and
              index_schema = ? and
              index_name collate utf8_general_ci <> 'PRIMARY'
        order by
          index_schema,
          table_name,
          index_name,
          seq_in_index
        
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204812] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204812] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204813] 
select
        c.constraint_name,
        c.table_name,
        c.constraint_type,
        r.match_option,
        r.update_rule,
        r.delete_rule
      from information_schema.table_constraints c
        left join information_schema.referential_constraints r on
            r.constraint_schema   = c.constraint_schema
        and r.constraint_name     = c.constraint_name
      where c.table_schema = ?
    
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204813] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204813] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204814] 
select
        constraint_name,
        table_name,
        column_name,
        referenced_table_schema,
        referenced_table_name,
        referenced_column_name
      from information_schema.key_column_usage
      where table_schema = ?
      order by
          table_name
        , constraint_name
        , ordinal_position
    
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204814] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204814] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204815] 
select
          trigger_name,
          event_object_table,
          event_manipulation,
          action_timing,
          definer
        from information_schema.triggers
        where trigger_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204815] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204815] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204816] 
select
          event_name,
          event_comment,
          definer,
          event_type = 'RECURRING' recurring,
          interval_value,
          interval_field,
          cast(coalesce(starts, execute_at) as char) starts,
          cast(ends as char) ends,
          status,
          on_completion = 'PRESERVE' preserve,
          last_executed
        from information_schema.events
        where event_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204816] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204816] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204817] 
select
          routine_name,
          routine_type,
          routine_definition,
          routine_comment,
          dtd_identifier,
          definer
        from information_schema.routines
        where routine_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204817] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204817] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204818] 
select specific_name,
        ordinal_position,
        parameter_name,
        parameter_mode,
        dtd_identifier
      from information_schema.parameters
      where specific_schema = ? and ordinal_position > 0
      order by specific_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204818] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204818] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204819] 
select table_name, view_definition, definer
      from information_schema.views
      where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204819] results received
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [introspection] [session id: 87974325] [statement id: 629204819] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 16:28:39 [testy2] [MySQL2] [session id: 87974325] disconnected
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [session id: 87974326] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974326] [statement id: 629204820] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974326] [statement id: 629204820] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974326] [statement id: 629204820] finished - execution time: 4 ms, fetching time: 50 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974326] [statement id: 629204821] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (2200)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974326] [statement id: 629204821] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974326] [statement id: 629204821] finished - execution time: 6 ms, fetching time: 13 ms, total result sets count: 1
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [session id: 87974326] disconnected
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [session id: 87974327] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [refactoring] [session id: 87974327] [statement id: 629204822] 
alter schema public rename to test
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [refactoring] [session id: 87974327] [statement id: 629204822] finished - execution time: 6 ms
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [session id: 87974328] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204823] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204823] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204823] finished - execution time: 1 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204824] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204824] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204824] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204825] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204825] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204825] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204826] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204826] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204826] finished - execution time: 10 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204827] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204827] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204827] finished - execution time: 4 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204828] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204828] results received
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204828] finished - execution time: 100 ms, fetching time: 18 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204829] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:04 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204829] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204829] finished - execution time: 5 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204830] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204830] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204830] finished - execution time: 8 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204831] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204831] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204831] finished - execution time: 7 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204832] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204832] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204832] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204833] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204833] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204833] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204834] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204834] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204834] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204835] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204835] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204835] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204836] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204836] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204836] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204837] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204837] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204837] finished - execution time: 6 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204838] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204838] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204838] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204839] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204839] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204839] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204840] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204840] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204840] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204841] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204841] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204841] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204842] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204842] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204842] finished - execution time: 4 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204843] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204843] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204843] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204844] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204844] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204844] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204845] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204845] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204845] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204846] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204846] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204846] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204847] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204847] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204847] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204848] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204848] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204848] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204849] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204849] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204849] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204850] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204850] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204850] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204851] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204851] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204851] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204852] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204852] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204852] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204853] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204853] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204853] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204854] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204854] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204854] finished - execution time: 30 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204855] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204855] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204855] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204856] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204856] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204856] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204857] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204857] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204857] finished - execution time: 18 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204858] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204858] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204858] finished - execution time: 21 ms, fetching time: 96 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204859] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204859] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204859] finished - execution time: 11 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204860] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204860] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204860] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204861] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204861] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204861] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204862] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204862] results received
-- 2020-11-11 16:29:05 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204862] finished - execution time: 9 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204863] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204863] results received
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204863] finished - execution time: 4 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204864] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204864] results received
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204864] finished - execution time: 5 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204865] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204865] results received
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204865] finished - execution time: 14 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204866] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  and pg_catalog.age(ft.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204866] results received
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204866] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204867] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid)) ),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204867] results received
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204867] finished - execution time: 17 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204868] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid) )
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204868] results received
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204868] finished - execution time: 25 ms, fetching time: 86 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:06 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204869] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204869] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204869] finished - execution time: 1 s 150 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204870] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204870] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204870] finished - execution time: 12 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204871] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204871] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204871] finished - execution time: 7 ms, fetching time: 15 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204872] 
with types      as (select distinct
                           T.oid as type_id,
                           C.oid as class_id
                    from pg_catalog.pg_type T
                    join pg_catalog.pg_class C
                      on T.typrelid = C.oid
                    join pg_catalog.pg_attribute A
                      on C.oid = A.attrelid
                    where T.typnamespace = ?::oid
                      and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
                      and T.typtype = 'c'::"char"
                      and C.relkind = 'c'::"char"),
     attributes as (select A.attrelid as class_id,
                           A.attnum   as att_position,
                           A.attname  as att_name,
                           pg_catalog.format_type(A.atttypid, A.atttypmod) as att_type,
                           A.attisdropped as att_dropped
                    from pg_catalog.pg_attribute A)
select type_id, att_position, att_name, att_type, att_dropped
from types natural join attributes
order by type_id::bigint, att_position
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204872] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204872] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204873] 
with types as (select distinct T.oid as type_id
               from pg_catalog.pg_type T
               join pg_catalog.pg_enum E
                 on T.oid = E.enumtypid
               where T.typnamespace = ?::oid
                 and T.typtype = 'e'::"char"
               and pg_catalog.age(E.xmin) <= pg_catalog.age(?::varchar::xid)
               )
select T.type_id as enum_id,
       pg_catalog.array_agg(E.enumlabel::varchar order by E.enumsortorder ) as enum_labels
from types T
join pg_catalog.pg_enum E
  on T.type_id = E.enumtypid
group by T.type_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204873] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204873] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204874] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204874] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204874] finished - execution time: 17 ms, fetching time: 22 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204875] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid) )
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204875] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204875] finished - execution time: 9 ms, fetching time: 17 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204876] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
where pg_catalog.age(table_state_id) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(?::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204876] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204876] finished - execution time: 6 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204877] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  and pg_catalog.age(R.xmin) <= pg_catalog.age(?::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204877] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204877] finished - execution time: 16 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204878] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204878] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204878] finished - execution time: 7 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204879] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204879] results received
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204879] finished - execution time: 30 ms, fetching time: 28 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:08 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204880] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  and (pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204880] results received
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204880] finished - execution time: 216 ms, fetching time: 21 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204881] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  and pg_catalog.age(R.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204881] results received
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204881] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204882] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204882] results received
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204882] finished - execution time: 6 ms, fetching time: 5 ms, total result sets count: 1
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase@localhost] [session id: 87974329] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974329] [statement id: 629204883] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:29:09 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974329] [statement id: 629204883] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974329] [statement id: 629204883] finished - execution time: 1 ms, fetching time: 90 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974329] [statement id: 629204884] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (2200)
*/
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974329] [statement id: 629204884] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974329] [statement id: 629204884] finished - execution time: 7 ms, fetching time: 22 ms, total result sets count: 1
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase@localhost] [session id: 87974329] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204885] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204885] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204885] finished - execution time: 4 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204886] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
          and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204886] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204886] finished - execution time: 16 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204887] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204887] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204887] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204888] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204888] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204888] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204889] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204889] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204889] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204890] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204890] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204890] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204891] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204891] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204891] finished - execution time: 7 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204892] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204892] results received
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204892] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:10 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204893] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204893] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204893] finished - execution time: 1 s 878 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204894] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204894] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204894] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204895] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204895] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204895] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204896] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204896] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204896] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204897] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204897] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204897] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204898] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204898] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204898] finished - execution time: 17 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204899] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204899] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204899] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204900] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204900] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204900] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204901] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204901] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204901] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204902] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204902] results received
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974328] [statement id: 629204902] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase@localhost] [session id: 87974330] connected
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase2@localhost] [session id: 87974328] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 87974330] [statement id: 629204903] 
alter schema public rename to test
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 87974330] [statement id: 629204903] finished - execution time: 2 ms
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase@localhost] [session id: 87974331] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204904] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 16:29:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204904] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204904] finished - execution time: 2 ms, fetching time: 26 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204905] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204905] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204905] finished - execution time: 4 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204906] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204906] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204906] finished - execution time: 23 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204907] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204907] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204907] finished - execution time: 7 ms, fetching time: 18 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204908] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204908] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204908] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204909] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204909] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204909] finished - execution time: 125 ms, fetching time: 160 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204910] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204910] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204910] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204911] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204911] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204911] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204912] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204912] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204912] finished - execution time: 18 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204913] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204913] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204913] finished - execution time: 9 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204914] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204914] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204914] finished - execution time: 15 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204915] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204915] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204915] finished - execution time: 7 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204916] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204916] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204916] finished - execution time: 12 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204917] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204917] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204917] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204918] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204918] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204918] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204919] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204919] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204919] finished - execution time: 10 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204920] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204920] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204920] finished - execution time: 8 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204921] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204921] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204921] finished - execution time: 9 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204922] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204922] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204922] finished - execution time: 10 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204923] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204923] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204923] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204924] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204924] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204924] finished - execution time: 10 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204925] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204925] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204925] finished - execution time: 4 ms, fetching time: 15 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204926] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204926] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204926] finished - execution time: 8 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204927] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204927] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204927] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204928] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204928] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204928] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204929] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204929] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204929] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204930] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204930] results received
-- 2020-11-11 16:29:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204930] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204931] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204931] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204931] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204932] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204932] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204932] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204933] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204933] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204933] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204934] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204934] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204934] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204935] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204935] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204935] finished - execution time: 19 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204936] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204936] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204936] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204937] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204937] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204937] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204938] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204938] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204938] finished - execution time: 12 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204939] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204939] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204939] finished - execution time: 15 ms, fetching time: 97 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204940] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204940] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204940] finished - execution time: 15 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204941] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204941] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204941] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204942] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204942] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204942] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204943] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204943] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204943] finished - execution time: 8 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204944] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204944] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204944] finished - execution time: 16 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204945] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204945] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204945] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204946] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204946] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204946] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204947] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204947] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204947] finished - execution time: 5 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204948] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204948] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204948] finished - execution time: 12 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204949] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  and pg_catalog.age(ft.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204949] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204949] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204950] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid)) ),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204950] results received
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204950] finished - execution time: 19 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204951] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid) )
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:29:14 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204951] results received
-- 2020-11-11 16:29:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204951] finished - execution time: 55 ms, fetching time: 440 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204952] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204952] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204952] finished - execution time: 1 s 138 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204953] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204953] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204953] finished - execution time: 13 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204954] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204954] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204954] finished - execution time: 3 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204955] 
with types      as (select distinct
                           T.oid as type_id,
                           C.oid as class_id
                    from pg_catalog.pg_type T
                    join pg_catalog.pg_class C
                      on T.typrelid = C.oid
                    join pg_catalog.pg_attribute A
                      on C.oid = A.attrelid
                    where T.typnamespace = ?::oid
                      and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
                      and T.typtype = 'c'::"char"
                      and C.relkind = 'c'::"char"),
     attributes as (select A.attrelid as class_id,
                           A.attnum   as att_position,
                           A.attname  as att_name,
                           pg_catalog.format_type(A.atttypid, A.atttypmod) as att_type,
                           A.attisdropped as att_dropped
                    from pg_catalog.pg_attribute A)
select type_id, att_position, att_name, att_type, att_dropped
from types natural join attributes
order by type_id::bigint, att_position
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204955] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204955] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204956] 
with types as (select distinct T.oid as type_id
               from pg_catalog.pg_type T
               join pg_catalog.pg_enum E
                 on T.oid = E.enumtypid
               where T.typnamespace = ?::oid
                 and T.typtype = 'e'::"char"
               and pg_catalog.age(E.xmin) <= pg_catalog.age(?::varchar::xid)
               )
select T.type_id as enum_id,
       pg_catalog.array_agg(E.enumlabel::varchar order by E.enumsortorder ) as enum_labels
from types T
join pg_catalog.pg_enum E
  on T.type_id = E.enumtypid
group by T.type_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204956] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204956] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204957] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204957] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204957] finished - execution time: 10 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204958] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid) )
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204958] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204958] finished - execution time: 5 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204959] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
where pg_catalog.age(table_state_id) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(?::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204959] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204959] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204960] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  and pg_catalog.age(R.xmin) <= pg_catalog.age(?::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204960] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204960] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204961] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204961] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204961] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204962] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204962] results received
-- 2020-11-11 16:29:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204962] finished - execution time: 24 ms, fetching time: 17 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204963] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  and (pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204963] results received
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204963] finished - execution time: 126 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204964] 
with A as ( select oid as table_id, pg_catalog.upper(relkind) as table_kind
            from pg_catalog.pg_class
            where relnamespace = ?::oid
              and relkind in ('r', 'm', 'v', 'f', 'p') )
select table_kind,
       table_id,
       R.oid as rule_id,
       pg_catalog.pg_get_ruledef(R.oid, true) as source_text
from A join pg_catalog.pg_rewrite R
        on A.table_id = R.ev_class
where R.rulename != '_RETURN'::name
  and pg_catalog.age(R.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204964] results received
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204964] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204965] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204965] results received
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204965] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204966] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204966] results received
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204966] finished - execution time: 6 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204967] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
          and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204967] results received
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 87974331] [statement id: 629204967] finished - execution time: 8 ms, fetching time: 4 ms, total result sets count: 1
-- 2020-11-11 16:29:17 [testy2] [PsqlDatabase@localhost] [session id: 87974331] disconnected
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [session id: 87974332] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204968] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204968] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204968] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204969] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204969] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204969] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204970] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204970] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204970] finished - execution time: 4 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204971] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204971] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204971] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204972] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204972] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204972] finished - execution time: 55 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204973] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204973] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204973] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204974] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204974] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204974] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204975] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204975] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204975] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204976] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204976] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204976] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204977] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204977] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204977] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204978] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204978] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204978] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204979] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204979] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204979] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204980] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204980] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204980] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204981] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204981] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204981] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204982] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204982] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204982] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204983] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204983] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204983] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204984] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204984] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204984] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204985] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204985] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204985] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204986] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204986] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204986] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204987] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204987] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204987] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204988] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204988] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204988] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204989] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204989] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204989] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204990] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204990] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204990] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204991] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204991] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204991] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204992] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204992] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204992] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204993] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204993] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204993] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204994] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204994] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204994] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204995] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204995] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204995] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204996] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204996] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204996] finished - execution time: 11 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204997] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204997] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204997] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204998] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204998] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204998] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204999] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204999] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629204999] finished - execution time: 1 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205000] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205000] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205000] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205001] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205001] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205001] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205002] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205002] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205002] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205003] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205003] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205003] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205004] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205004] results received
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205004] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:26 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205005] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205005] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205005] finished - execution time: 1 s 201 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205006] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205006] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205006] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205007] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205007] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205007] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205008] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205008] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205008] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205009] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205009] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205009] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205010] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205010] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205010] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205011] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205011] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205011] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205012] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205012] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205012] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205013] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205013] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205013] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205014] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205014] results received
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [introspection] [session id: 87974332] [statement id: 629205014] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 16:29:27 [testy2] [PsqlDatabase2@localhost] [session id: 87974332] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:46 [testy2] [MySQL2] [refactoring] [session id: 87974324] [statement id: 629205015] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-11 16:29:46 [testy2] [MySQL2] [refactoring] [session id: 87974324] [statement id: 629205015] finished - execution time: 15 ms
-- 2020-11-11 16:29:46 [testy2] [MySQL2] [session id: 87974333] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:46 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205016] 
select database()
-- ] --------------------------------------------------
-- 2020-11-11 16:29:46 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205016] results received
-- 2020-11-11 16:29:46 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205016] finished - execution time: 4 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205017] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205017] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205017] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205018] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205018] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205018] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205019] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205019] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205019] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205020] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205020] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205020] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205021] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205021] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205021] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205022] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205022] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205022] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205023] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205023] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205023] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205024] 
select collation_name, character_set_name,
          is_default collate utf8_general_ci = 'Yes' as is_default
        from information_schema.collations
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205024] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205024] finished - execution time: 5 ms, fetching time: 61 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205025] 
select grantee from information_schema.user_privileges group by grantee
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205025] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205025] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205026] 
show grants for 'debian-sys-maint'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205026] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205026] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205027] 
show grants for 'mysql.infoschema'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205027] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205027] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205028] 
show grants for 'mysql.session'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205028] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205028] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205029] 
show grants for 'mysql.sys'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205029] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205029] finished - execution time: 13 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205030] 
show grants for 'root'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205030] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205030] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205031] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205031] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205031] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205032] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205032] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205032] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205033] 
select table_name, table_type, table_comment, engine, table_collation
        from information_schema.tables
        where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205033] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205033] finished - execution time: 7 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205034] 
select
        ordinal_position,
        column_name,
        column_type,
        column_default,
        generation_expression,
        table_name,
        column_comment,
        is_nullable,
        extra,
        collation_name
      from information_schema.columns
      where table_schema = ?
      order by table_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205034] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205034] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205035] 
select
          table_name,
          index_name,
          index_comment,
          index_type,
          non_unique,
          column_name,
          collation,
          expression
        from information_schema.statistics
        where table_schema = ? and
              index_schema = ? and
              index_name collate utf8_general_ci <> 'PRIMARY'
        order by
          index_schema,
          table_name,
          index_name,
          seq_in_index
        
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205035] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205035] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205036] 
select
        c.constraint_name,
        c.table_name,
        c.constraint_type,
        r.match_option,
        r.update_rule,
        r.delete_rule
      from information_schema.table_constraints c
        left join information_schema.referential_constraints r on
            r.constraint_schema   = c.constraint_schema
        and r.constraint_name     = c.constraint_name
      where c.table_schema = ?
    
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205036] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205036] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205037] 
select
        constraint_name,
        table_name,
        column_name,
        referenced_table_schema,
        referenced_table_name,
        referenced_column_name
      from information_schema.key_column_usage
      where table_schema = ?
      order by
          table_name
        , constraint_name
        , ordinal_position
    
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205037] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205037] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205038] 
select
          trigger_name,
          event_object_table,
          event_manipulation,
          action_timing,
          definer
        from information_schema.triggers
        where trigger_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205038] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205038] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205039] 
select
          event_name,
          event_comment,
          definer,
          event_type = 'RECURRING' recurring,
          interval_value,
          interval_field,
          cast(coalesce(starts, execute_at) as char) starts,
          cast(ends as char) ends,
          status,
          on_completion = 'PRESERVE' preserve,
          last_executed
        from information_schema.events
        where event_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205039] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205039] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205040] 
select
          routine_name,
          routine_type,
          routine_definition,
          routine_comment,
          dtd_identifier,
          definer
        from information_schema.routines
        where routine_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205040] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205040] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205041] 
select specific_name,
        ordinal_position,
        parameter_name,
        parameter_mode,
        dtd_identifier
      from information_schema.parameters
      where specific_schema = ? and ordinal_position > 0
      order by specific_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205041] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205041] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205042] 
select table_name, view_definition, definer
      from information_schema.views
      where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205042] results received
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [introspection] [session id: 87974333] [statement id: 629205042] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 16:29:47 [testy2] [MySQL2] [session id: 87974333] disconnected
-- 2020-11-11 16:29:53 [testy2] [MySQL1@localhost] [session id: 87974334] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:53 [testy2] [MySQL1@localhost] [refactoring] [session id: 87974334] [statement id: 629205043] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-11 16:29:53 [testy2] [MySQL1@localhost] [refactoring] [session id: 87974334] [statement id: 629205043] error - [HY000][1007] Can't create database 'test'; database exists
-- 2020-11-11 16:29:53 [testy2] [MySQL1@localhost] [refactoring] [session id: 87974334] [statement id: 629205043] finished - execution time: 19 ms
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [refactoring] [session id: 87974334] warning - [HY000][1007] Can't create database 'test'; database exists
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [session id: 87974335] connected
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205044] 
select database()
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205044] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205044] finished - execution time: 41 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205045] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205045] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205045] finished - execution time: 3 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205046] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205046] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205046] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205047] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205047] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205047] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205048] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205048] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205048] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205049] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205049] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205049] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205050] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205050] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205050] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205051] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205051] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205051] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205052] 
select collation_name, character_set_name,
          is_default collate utf8_general_ci = 'Yes' as is_default
        from information_schema.collations
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205052] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205052] finished - execution time: 7 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205053] 
select grantee from information_schema.user_privileges group by grantee
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205053] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205053] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205054] 
show grants for 'debian-sys-maint'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205054] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205054] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205055] 
show grants for 'mysql.infoschema'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205055] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205055] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205056] 
show grants for 'mysql.session'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205056] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205056] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205057] 
show grants for 'mysql.sys'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205057] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205057] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205058] 
show grants for 'root'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205058] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205058] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205059] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205059] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205059] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205060] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205060] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205060] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205061] 
select table_name, table_type, table_comment, engine, table_collation
        from information_schema.tables
        where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205061] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205061] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205062] 
select
        ordinal_position,
        column_name,
        column_type,
        column_default,
        generation_expression,
        table_name,
        column_comment,
        is_nullable,
        extra,
        collation_name
      from information_schema.columns
      where table_schema = ?
      order by table_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205062] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205062] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205063] 
select
          table_name,
          index_name,
          index_comment,
          index_type,
          non_unique,
          column_name,
          collation,
          expression
        from information_schema.statistics
        where table_schema = ? and
              index_schema = ? and
              index_name collate utf8_general_ci <> 'PRIMARY'
        order by
          index_schema,
          table_name,
          index_name,
          seq_in_index
        
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205063] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205063] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205064] 
select
        c.constraint_name,
        c.table_name,
        c.constraint_type,
        r.match_option,
        r.update_rule,
        r.delete_rule
      from information_schema.table_constraints c
        left join information_schema.referential_constraints r on
            r.constraint_schema   = c.constraint_schema
        and r.constraint_name     = c.constraint_name
      where c.table_schema = ?
    
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205064] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205064] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205065] 
select
        constraint_name,
        table_name,
        column_name,
        referenced_table_schema,
        referenced_table_name,
        referenced_column_name
      from information_schema.key_column_usage
      where table_schema = ?
      order by
          table_name
        , constraint_name
        , ordinal_position
    
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205065] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205065] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205066] 
select
          trigger_name,
          event_object_table,
          event_manipulation,
          action_timing,
          definer
        from information_schema.triggers
        where trigger_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205066] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205066] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205067] 
select
          event_name,
          event_comment,
          definer,
          event_type = 'RECURRING' recurring,
          interval_value,
          interval_field,
          cast(coalesce(starts, execute_at) as char) starts,
          cast(ends as char) ends,
          status,
          on_completion = 'PRESERVE' preserve,
          last_executed
        from information_schema.events
        where event_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205067] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205067] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205068] 
select
          routine_name,
          routine_type,
          routine_definition,
          routine_comment,
          dtd_identifier,
          definer
        from information_schema.routines
        where routine_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205068] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205068] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205069] 
select specific_name,
        ordinal_position,
        parameter_name,
        parameter_mode,
        dtd_identifier
      from information_schema.parameters
      where specific_schema = ? and ordinal_position > 0
      order by specific_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205069] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205069] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205070] 
select table_name, view_definition, definer
      from information_schema.views
      where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205070] results received
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [introspection] [session id: 87974335] [statement id: 629205070] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- 2020-11-11 16:29:54 [testy2] [MySQL1@localhost] [session id: 87974335] disconnected
-- 2020-11-11 17:11:38 [testy2] [MySQL1@localhost] [session id: 254131819] connected
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125033] 
select database()
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125033] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125033] finished - execution time: 60 ms, fetching time: 37 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125034] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125034] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125034] finished - execution time: 7 ms, fetching time: 24 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125035] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125035] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125035] finished - execution time: 5 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125036] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125036] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125036] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125037] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125037] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125037] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125038] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125038] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125038] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125039] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125039] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125039] finished - execution time: 4 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125040] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125040] results received
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [introspection] [session id: 254131819] [statement id: 1508125040] finished - execution time: 3 ms, fetching time: 12 ms, total result sets count: 1
-- 2020-11-11 17:11:39 [testy2] [MySQL1@localhost] [session id: 254131819] disconnected
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [session id: 1874566885] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [refactoring] [session id: 1874566885] [statement id: 185418272] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [refactoring] [session id: 1874566885] [statement id: 185418272] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [refactoring] [session id: 1874566885] [statement id: 185418272] finished - execution time: 15 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [refactoring] [session id: 1874566885] [statement id: 185418273] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [refactoring] [session id: 1874566885] [statement id: 185418273] finished - execution time: 14 ms
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [session id: 1874566886] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418274] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418274] results received
-- 2020-11-11 22:03:35 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418274] finished - execution time: 1 ms, fetching time: 69 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418275] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418275] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418275] finished - execution time: 20 ms, fetching time: 21 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418276] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418276] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418276] finished - execution time: 5 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418277] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418277] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418277] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418278] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418278] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418278] finished - execution time: 2 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418279] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418279] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418279] finished - execution time: 13 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418280] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418280] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418280] finished - execution time: 8 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418281] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418281] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418281] finished - execution time: 32 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418282] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418282] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418282] finished - execution time: 18 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418283] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418283] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418283] finished - execution time: 54 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418284] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418284] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418284] finished - execution time: 8 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418285] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418285] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418285] finished - execution time: 21 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418286] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418286] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418286] finished - execution time: 13 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418287] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418287] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418287] finished - execution time: 13 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418288] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418288] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418288] finished - execution time: 22 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418289] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418289] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418289] finished - execution time: 13 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418290] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418290] results received
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [introspection] [session id: 1874566886] [statement id: 185418290] finished - execution time: 14 ms, fetching time: 3 ms, total result sets count: 1
-- 2020-11-11 22:03:36 [testy2] [MSSQL] [session id: 1874566886] disconnected
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [session id: 1874566887] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1874566887] [statement id: 185418291] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1874566887] [statement id: 185418291] error - [42P06] ERROR: schema "test" already exists
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1874566887] [statement id: 185418291] finished - execution time: 27 ms
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [session id: 1874566888] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418292] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418292] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418292] finished - execution time: 3 ms, fetching time: 37 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418293] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418293] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418293] finished - execution time: 3 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418294] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418294] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418294] finished - execution time: 3 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418295] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418295] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418295] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418296] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418296] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418296] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418297] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418297] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418297] finished - execution time: 53 ms, fetching time: 15 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418298] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418298] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418298] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418299] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418299] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418299] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418300] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418300] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418300] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418301] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418301] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418301] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418302] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418302] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418302] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418303] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418303] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418303] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418304] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418304] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418304] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418305] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418305] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418305] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418306] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418306] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418306] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418307] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418307] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418307] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418308] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418308] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418308] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418309] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418309] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418309] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418310] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418310] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418310] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418311] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418311] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418311] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418312] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418312] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418312] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418313] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418313] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418313] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418314] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418314] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418314] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418315] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418315] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418315] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418316] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418316] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418316] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418317] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418317] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418317] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418318] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418318] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418318] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418319] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418319] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418319] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418320] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418320] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418320] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418321] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418321] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418321] finished - execution time: 8 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418322] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418322] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418322] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418323] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418323] results received
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418323] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:12 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418324] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 22:04:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418324] results received
-- 2020-11-11 22:04:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418324] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418325] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 22:04:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418325] results received
-- 2020-11-11 22:04:13 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1874566888] [statement id: 185418325] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:04:13 [testy2] [PsqlDatabase@localhost] [session id: 1874566888] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:04:44 [testy2] [MSSQL] [refactoring] [session id: 1874566885] [statement id: 185418326] 
create table test.test_table1
(
	test_column1 int,
	test_column2 int
)
-- ] --------------------------------------------------
-- 2020-11-11 22:04:44 [testy2] [MSSQL] [refactoring] [session id: 1874566885] [statement id: 185418326] finished - execution time: 15 ms
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [session id: 1874566889] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418327] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418327] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418327] finished - execution time: 1 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418328] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418328] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418328] finished - execution time: 18 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418329] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418329] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418329] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418330] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418330] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418330] finished - execution time: 2 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418331] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418331] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418331] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418332] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418332] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418332] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418333] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418333] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418333] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418334] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418334] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418334] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418335] 
with T as ( select object_id, create_date
            from master.sys.all_objects
            where schema_id = ?
              and type in ('U','S','IT','V','TT','IF','FT','TF')
              and modify_date >= ? )
select T.create_date,
       C.object_id, C.column_id as column_position, C.name,
       Y.name as type_name,
       C.max_length, C.precision, C.scale, C.collation_name,
       C.is_nullable, C.is_computed,
       cast(I.seed_value as bigint) as identity_seed_value,
       cast(I.increment_value as bigint) as identity_increment_value,
       cast(I.last_value as bigint) as identity_last_value,
       D.name as default_constraint_name,
       D.is_system_named as default_constraint_name_is_surrogate,
       D.object_id as default_constraint_object_id,
       D.modify_date default_constraint_modify_date,
       coalesce(D.definition, X.definition) as default_expression,
       C.is_hidden /* 0 */ as is_hidden,
       C.is_sparse /* 0 */ as is_sparse,
       C.is_column_set /* 0 */ as is_column_set
from T join master.sys.all_columns C on T.object_id = C.object_id
       left outer join master.sys.types Y on C.system_type_id = Y.system_type_id and C.user_type_id = Y.user_type_id
       left outer join master.sys.identity_columns I on C.object_id = I.object_id and C.column_id = I.column_id
       left outer join master.sys.default_constraints D on C.object_id = D.parent_object_id and C.column_id = D.parent_column_id
       left outer join master.sys.computed_columns X on C.object_id = X.object_id and C.column_id = X.column_id
order by T.create_date, C.object_id, C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418335] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418335] finished - execution time: 205 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418336] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418336] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418336] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418337] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418337] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418337] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418338] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418338] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418338] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418339] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418339] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418339] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418340] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418340] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418340] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418341] 
select T.object_id as table_id,
       F.object_id as constraint_id,
       F.name,
       F.is_system_named,
       F.referenced_object_id,
       X.name as referenced_object_name,
       X.schema_id as referenced_schema_id,
       F.key_index_id,
       F.is_disabled,
       F.update_referential_action,
       F.delete_referential_action,
       F.create_date,
       F.modify_date
from master.sys.all_objects T
     join master.sys.foreign_keys F on T.object_id = F.parent_object_id and T.schema_id = F.schema_id
     left join master.sys.objects X on F.referenced_object_id = X.object_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418341] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418341] finished - execution time: 20 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418342] 
select T.object_id as table_id,
       X.object_id as constraint_id,
       X.name,
       X.is_system_named,
       C.name as column_name,
       X.definition,
       X.create_date,
       X.modify_date
from master.sys.all_objects T
     join master.sys.check_constraints X on T.object_id = X.parent_object_id and T.schema_id = X.schema_id
     left outer join master.sys.all_columns C on X.parent_object_id = C.object_id and X.parent_column_id = C.column_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, X.parent_column_id, X.create_date, X.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418342] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418342] finished - execution time: 28 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418343] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418343] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418343] finished - execution time: 36 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418344] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418344] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418344] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418345] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418345] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418345] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418346] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418346] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418346] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418347] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418347] results received
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [introspection] [session id: 1874566889] [statement id: 185418347] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:04:45 [testy2] [MSSQL] [session id: 1874566889] disconnected
-- 2020-11-11 22:34:55 [testy2] [MSSQL] [session id: 721963617] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:34:55 [testy2] [MSSQL] [refactoring] [session id: 721963617] [statement id: 1813750182] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [refactoring] [session id: 721963617] [statement id: 1813750182] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [refactoring] [session id: 721963617] [statement id: 1813750182] finished - execution time: 15 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [refactoring] [session id: 721963617] [statement id: 1813750183] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [refactoring] [session id: 721963617] [statement id: 1813750183] error - [S0001][2714] There is already an object named 'test' in the database.
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [refactoring] [session id: 721963617] [statement id: 1813750183] finished - execution time: 20 ms
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [session id: 721963618] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750184] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750184] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750184] finished - execution time: 2 ms, fetching time: 70 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750185] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750185] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750185] finished - execution time: 7 ms, fetching time: 26 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750186] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750186] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750186] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750187] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750187] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750187] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750188] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750188] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750188] finished - execution time: 2 ms, fetching time: 10 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750189] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750189] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750189] finished - execution time: 7 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750190] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750190] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750190] finished - execution time: 11 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750191] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750191] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750191] finished - execution time: 6 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750192] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750192] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750192] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750193] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750193] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750193] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750194] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750194] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750194] finished - execution time: 24 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750195] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750195] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750195] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750196] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750196] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750196] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750197] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750197] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750197] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750198] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750198] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750198] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750199] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750199] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750199] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750200] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750200] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750200] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750201] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750201] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750201] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750202] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750202] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750202] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750203] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750203] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750203] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750204] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750204] results received
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [introspection] [session id: 721963618] [statement id: 1813750204] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:34:56 [testy2] [MSSQL] [session id: 721963618] disconnected
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [session id: 721963619] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 721963619] [statement id: 1813750205] 
create schema schema_nametest
-- ] --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 721963619] [statement id: 1813750205] finished - execution time: 7 ms
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [session id: 721963620] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750206] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750206] results received
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750206] finished - execution time: 2 ms, fetching time: 57 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750207] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750207] results received
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750207] finished - execution time: 3 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750208] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750208] results received
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750208] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750209] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750209] results received
-- 2020-11-11 22:35:15 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750209] finished - execution time: 5 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750210] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750210] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750210] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750211] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750211] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750211] finished - execution time: 60 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750212] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750212] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750212] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750213] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750213] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750213] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750214] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750214] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750214] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750215] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750215] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750215] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750216] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750216] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750216] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750217] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750217] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750217] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750218] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750218] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750218] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750219] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750219] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750219] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750220] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750220] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750220] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750221] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750221] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750221] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750222] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750222] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750222] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750223] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750223] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750223] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750224] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750224] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750224] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750225] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750225] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750225] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750226] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750226] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750226] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750227] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750227] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750227] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750228] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750228] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750228] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750229] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750229] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750229] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750230] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750230] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750230] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750231] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750231] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750231] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750232] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750232] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750232] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750233] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750233] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750233] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750234] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750234] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750234] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750235] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750235] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750235] finished - execution time: 8 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750236] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750236] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750236] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750237] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750237] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750237] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750238] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750238] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750238] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750239] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750239] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750239] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750240] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750240] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750240] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750241] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750241] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750241] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750242] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750242] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750242] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750243] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750243] results received
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750243] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:16 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750244] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750244] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750244] finished - execution time: 1 s 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750245] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750245] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750245] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750246] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750246] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750246] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750247] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750247] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750247] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750248] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750248] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750248] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750249] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750249] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750249] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750250] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750250] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750250] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750251] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750251] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750251] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750252] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750252] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750252] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750253] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750253] results received
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963620] [statement id: 1813750253] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:35:17 [testy2] [PsqlDatabase@localhost] [session id: 721963620] disconnected
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [session id: 721963621] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963621] [statement id: 1813750254] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (24585)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (24585)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (24585)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (24585)
*/
-- ] --------------------------------------------------
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963621] [statement id: 1813750254] results received
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963621] [statement id: 1813750254] finished - execution time: 8 ms, fetching time: 9 ms, total result sets count: 1
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [session id: 721963621] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 721963619] [statement id: 1813750255] 
alter schema schema_nametest rename to test
-- ] --------------------------------------------------
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 721963619] [statement id: 1813750255] error - [42P06] ERROR: schema "test" already exists
-- 2020-11-11 22:35:22 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 721963619] [statement id: 1813750255] finished - execution time: 17 ms
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [session id: 721963622] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750256] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750256] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750256] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750257] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750257] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750257] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750258] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750258] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750258] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750259] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750259] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750259] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750260] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750260] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750260] finished - execution time: 93 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750261] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750261] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750261] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750262] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750262] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750262] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750263] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750263] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750263] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750264] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750264] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750264] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750265] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750265] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750265] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750266] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750266] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750266] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750267] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750267] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750267] finished - execution time: 6 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750268] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750268] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750268] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750269] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750269] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750269] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750270] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750270] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750270] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750271] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750271] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750271] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750272] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750272] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750272] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750273] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750273] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750273] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750274] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750274] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750274] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750275] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750275] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750275] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750276] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750276] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750276] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750277] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750277] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750277] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750278] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750278] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750278] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750279] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750279] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750279] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750280] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750280] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750280] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750281] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750281] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750281] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750282] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750282] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750282] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750283] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750283] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750283] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750284] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750284] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750284] finished - execution time: 11 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750285] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750285] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750285] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750286] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750286] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750286] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750287] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750287] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750287] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750288] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750288] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750288] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750289] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750289] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750289] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750290] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750290] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750290] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750291] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750291] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750291] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750292] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750292] results received
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750292] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750293] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750293] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750293] finished - execution time: 1 s 92 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750294] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750294] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750294] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750295] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750295] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750295] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750296] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750296] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750296] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750297] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750297] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750297] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750298] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750298] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750298] finished - execution time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750299] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750299] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750299] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750300] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750300] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750300] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750301] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750301] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750301] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750302] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750302] results received
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963622] [statement id: 1813750302] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:35:24 [testy2] [PsqlDatabase@localhost] [session id: 721963622] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 721963619] [statement id: 1813750303] 
drop table test.table_name
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 721963619] [statement id: 1813750303] finished - execution time: 6 ms
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [session id: 721963623] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750304] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750304] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750304] finished - execution time: 10 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750305] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750305] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750305] finished - execution time: 6 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750306] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750306] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750306] finished - execution time: 4 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750307] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750307] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750307] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750308] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750308] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750308] finished - execution time: 110 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750309] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750309] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750309] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750310] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750310] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750310] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750311] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750311] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750311] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750312] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750312] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750312] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750313] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750313] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750313] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750314] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750314] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750314] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750315] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750315] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750315] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750316] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750316] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750316] finished - execution time: 7 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750317] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750317] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750317] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750318] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750318] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750318] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750319] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750319] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750319] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750320] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750320] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750320] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750321] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750321] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750321] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750322] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750322] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750322] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750323] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750323] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750323] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750324] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750324] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750324] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750325] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750325] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750325] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750326] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750326] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750326] finished - execution time: 4 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750327] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750327] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750327] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750328] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750328] results received
-- 2020-11-11 22:35:49 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750328] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750329] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750329] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750329] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750330] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750330] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750330] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750331] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750331] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750331] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750332] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750332] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750332] finished - execution time: 10 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750333] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750333] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750333] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750334] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750334] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750334] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750335] 
select distinct oid
from pg_catalog.pg_type
where typnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_class
where relnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_proc
where pronamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_operator
where oprnamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_constraint
where connamespace = ?::oid
union
select distinct oid
from pg_catalog.pg_collation
where collnamespace = ?::oid
union

select distinct IX.indexrelid
from pg_catalog.pg_index IX,
     pg_catalog.pg_class IC
where IC.oid = IX.indrelid
  and IC.relnamespace = ?::oid
union
select distinct RU.oid
from pg_catalog.pg_rewrite RU,
     pg_catalog.pg_class RC
where RC.oid = RU.ev_class
  and RC.relnamespace = ?::oid
  and not RU.rulename = '_RETURN'
union
select distinct TG.oid
from pg_catalog.pg_trigger TG,
     pg_catalog.pg_class TC
where TC.oid = TG.tgrelid
  and TC.relnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750335] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750335] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750336] 
select D.objoid id, pg_catalog.array_agg(D.objsubid) sub_ids
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
group by D.objoid
union all
select T.oid id, pg_catalog.array_agg(D.objsubid)
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
group by T.oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
union all
select D.objoid id, array[D.objsubid]
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750336] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750336] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750337] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750337] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750337] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750338] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750338] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750338] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750339] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750339] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750339] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750340] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750340] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750340] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750341] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750341] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750341] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750342] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750342] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750342] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750343] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750343] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750343] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750344] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  and pg_catalog.age(ft.xmin) <= pg_catalog.age(?::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750344] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750344] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750345] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750345] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750345] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750346] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)  ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid)) ),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750346] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750346] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750347] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750347] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750347] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750348] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid) )
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750348] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750348] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750349] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750349] results received
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750349] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:50 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750350] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
and (pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(?::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750350] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750350] finished - execution time: 996 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750351] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750351] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750351] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750352] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750352] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750352] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750353] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750353] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750353] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750354] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750354] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750354] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750355] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750355] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750355] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750356] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750356] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750356] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750357] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750357] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750357] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750358] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750358] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750358] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750359] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    and pg_catalog.age(cls.xmin) <= pg_catalog.age(?::varchar::xid) )
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750359] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750359] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750360] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750360] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750360] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750361] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
where pg_catalog.age(table_state_id) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(?::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750361] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750361] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750362] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750362] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750362] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750363] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750363] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750363] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750364] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750364] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750364] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750365] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750365] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750365] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750366] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750366] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750366] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750367] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  and (pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750367] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750367] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750368] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750368] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750368] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750369] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750369] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750369] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750370] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  and pg_catalog.age(xmin) <= pg_catalog.age(?::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750370] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750370] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750371] 
select pg_catalog.age(?::varchar::xid) as schema_age, pg_catalog.age(?::varchar::xid) as sources_age
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750371] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750371] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750372] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
            and pg_catalog.age(T.xmin) <= pg_catalog.age(?::varchar::xid)
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750372] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750372] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750373] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
          and pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750373] results received
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 721963623] [statement id: 1813750373] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:35:51 [testy2] [PsqlDatabase@localhost] [session id: 721963623] disconnected
-- 2020-11-11 22:36:07 [testy2] [MSSQL] [session id: 721963617] disconnected
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [session id: 721963624] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750374] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750374] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750374] finished - execution time: 1 ms, fetching time: 24 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750375] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750375] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750375] finished - execution time: 4 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750376] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750376] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750376] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750377] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750377] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750377] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750378] 
select X.major_id object_id, X.minor_id as position,
       X.name as name, cast(X.value as varchar(max)) as value, SQL_VARIANT_PROPERTY(X.value, 'BaseType') as type
from master.sys.extended_properties X
where X.class = 0
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750378] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750378] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750379] 
select cast(database_id as varchar(20)) + '.' + cast(cast(create_date as bigint) as varchar(20)) + '/' + cast(service_broker_guid as varchar(60)) + '@' + @@servername as fingerprint
from sys.databases
where /* name = db_name() */database_id = db_id() 
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750379] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750379] finished - execution time: 14 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750380] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750380] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750380] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750381] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750381] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750381] finished - execution time: 1 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750382] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750382] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750382] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750383] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750383] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750383] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750384] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750384] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750384] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750385] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750385] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750385] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750386] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750386] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750386] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750387] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750387] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750387] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750388] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750388] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750388] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750389] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750389] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750389] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750390] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750390] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750390] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750391] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750391] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750391] finished - execution time: 23 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750392] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750392] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750392] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750393] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750393] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750393] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750394] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750394] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750394] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750395] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750395] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750395] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750396] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750396] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750396] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750397] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750397] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750397] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750398] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750398] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750398] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750399] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750399] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750399] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750400] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750400] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750400] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750401] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750401] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750401] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750402] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750402] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750402] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750403] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750403] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750403] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750404] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750404] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750404] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750405] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750405] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750405] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750406] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750406] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750406] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750407] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750407] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750407] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750408] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750408] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750408] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750409] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750409] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750409] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750410] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750410] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750410] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750411] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750411] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750411] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750412] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750412] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750412] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750413] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750413] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750413] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750414] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750414] results received
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [introspection] [session id: 721963624] [statement id: 1813750414] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:36:18 [testy2] [MSSQL] [session id: 721963624] disconnected
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [session id: 1601179851] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459636] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459636] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459636] finished - execution time: 4 ms, fetching time: 59 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459637] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459637] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459637] finished - execution time: 6 ms, fetching time: 26 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459638] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459638] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459638] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459639] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459639] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459639] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459640] 
select X.major_id object_id, X.minor_id as position,
       X.name as name, cast(X.value as varchar(max)) as value, SQL_VARIANT_PROPERTY(X.value, 'BaseType') as type
from master.sys.extended_properties X
where X.class = 0
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459640] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459640] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459641] 
select cast(database_id as varchar(20)) + '.' + cast(cast(create_date as bigint) as varchar(20)) + '/' + cast(service_broker_guid as varchar(60)) + '@' + @@servername as fingerprint
from sys.databases
where /* name = db_name() */database_id = db_id() 
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459641] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459641] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459642] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459642] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459642] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459643] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459643] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459643] finished - execution time: 3 ms, fetching time: 17 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459644] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459644] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459644] finished - execution time: 5 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459645] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459645] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459645] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459646] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459646] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459646] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459647] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459647] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459647] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459648] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459648] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459648] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459649] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459649] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459649] finished - execution time: 24 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459650] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459650] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459650] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459651] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459651] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459651] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459652] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459652] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459652] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459653] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459653] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459653] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459654] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459654] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459654] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459655] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459655] results received
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459655] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:16 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459656] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459656] results received
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459656] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459657] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459657] results received
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459657] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459658] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459658] results received
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459658] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459659] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459659] results received
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [introspection] [session id: 1601179851] [statement id: 591459659] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:40:17 [testy2] [MSSQL] [session id: 1601179851] disconnected
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [session id: 1601179852] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1601179852] [statement id: 591459660] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1601179852] [statement id: 591459660] error - [42P06] ERROR: schema "test" already exists
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1601179852] [statement id: 591459660] finished - execution time: 46 ms
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [session id: 1601179853] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459661] 
select current_database() as a, current_schemas(false) as b
-- ] --------------------------------------------------
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459661] results received
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459661] finished - execution time: 2 ms, fetching time: 38 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459662] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-11 22:40:44 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459662] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459662] finished - execution time: 2 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459663] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459663] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459663] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459664] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459664] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459664] finished - execution time: 4 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459665] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459665] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459665] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459666] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459666] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459666] finished - execution time: 60 ms, fetching time: 18 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459667] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459667] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459667] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459668] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459668] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459668] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459669] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459669] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459669] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459670] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459670] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459670] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459671] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459671] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459671] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459672] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459672] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459672] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459673] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459673] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459673] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459674] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459674] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459674] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459675] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459675] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459675] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459676] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459676] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459676] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459677] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459677] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459677] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459678] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459678] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459678] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459679] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459679] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459679] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459680] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459680] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459680] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459681] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459681] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459681] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459682] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459682] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459682] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459683] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459683] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459683] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459684] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459684] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459684] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459685] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459685] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459685] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459686] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459686] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459686] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459687] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459687] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459687] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459688] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459688] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459688] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459689] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459689] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459689] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459690] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459690] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459690] finished - execution time: 12 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459691] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459691] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459691] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459692] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459692] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459692] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459693] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459693] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459693] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459694] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459694] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459694] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459695] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459695] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459695] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459696] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459696] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459696] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459697] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459697] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459697] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459698] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459698] results received
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459698] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:45 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459699] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459699] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459699] finished - execution time: 1 s 72 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459700] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459700] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459700] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459701] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459701] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459701] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459702] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459702] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459702] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459703] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459703] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459703] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459704] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459704] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459704] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459705] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459705] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459705] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459706] 
with system_languages as ( select oid as lang
                           from pg_catalog.pg_language
                           where lanname in ('c','internal') )
select oid as id,
       pg_catalog.pg_get_function_arguments(oid) as arguments_def,
       pg_catalog.pg_get_function_result(oid) as result_def,
       prosrc as source_text
from pg_catalog.pg_proc
where pronamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:src_tx::varchar::xid)
  and not (prokind = 'a') /* proisagg */
  and prolang not in (select lang from system_languages)
  and prosrc is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459706] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459706] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459707] 
select T.oid as object_id,
                 unnest(T.relacl) as aclitem
          from pg_catalog.pg_class T
          where relnamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.proacl) as aclitem
          from pg_catalog.pg_proc T
          where pronamespace = ?::oid 
          union all
          select T.oid as object_id,
                 unnest(T.typacl) as aclitem
          from pg_catalog.pg_type T
          where typnamespace = ?::oid 
          order by object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459707] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459707] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459708] 
select T.oid as object_id,
               A.attnum as attr_position,
               unnest(A.attacl) as aclitem
        from pg_catalog.pg_attribute A join pg_catalog.pg_class T on T.oid = A.attrelid
        where relnamespace = ?::oid
          and attnum > 0 
        order by object_id, attr_position
-- ] --------------------------------------------------
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459708] results received
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1601179853] [statement id: 591459708] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:40:46 [testy2] [PsqlDatabase@localhost] [session id: 1601179853] disconnected
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [session id: 1601179854] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459709] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459709] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459709] finished - execution time: 26 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459710] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459710] error - [S0001][2714] There is already an object named 'test' in the database.
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459710] finished - execution time: 7 ms
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [session id: 1601179855] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459711] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459711] results received
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459711] finished - execution time: 1 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459712] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459712] results received
-- 2020-11-11 22:40:57 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459712] finished - execution time: 9 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459713] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459713] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459713] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459714] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459714] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459714] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459715] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459715] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459715] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459716] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459716] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459716] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459717] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459717] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459717] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459718] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459718] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459718] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459719] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459719] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459719] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459720] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459720] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459720] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459721] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459721] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459721] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459722] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459722] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459722] finished - execution time: 3 ms, fetching time: 35 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459723] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459723] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459723] finished - execution time: 6 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459724] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459724] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459724] finished - execution time: 7 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459725] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459725] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459725] finished - execution time: 7 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459726] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459726] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459726] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459727] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459727] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459727] finished - execution time: 6 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459728] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459728] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459728] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459729] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459729] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459729] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459730] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459730] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459730] finished - execution time: 7 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459731] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459731] results received
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [introspection] [session id: 1601179855] [statement id: 591459731] finished - execution time: 10 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:40:58 [testy2] [MSSQL] [session id: 1601179855] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459732] 
create table test.table2
(
	column1 CHAR
)
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459732] finished - execution time: 7 ms
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [session id: 1601179856] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459733] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459733] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459733] finished - execution time: 1 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459734] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459734] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459734] finished - execution time: 7 ms, fetching time: 12 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459735] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459735] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459735] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459736] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459736] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459736] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459737] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459737] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459737] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459738] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459738] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459738] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459739] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459739] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459739] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459740] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459740] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459740] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459741] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459741] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459741] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459742] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459742] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459742] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459743] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459743] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459743] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459744] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459744] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459744] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459745] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459745] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459745] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459746] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459746] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459746] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459747] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459747] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459747] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459748] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459748] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459748] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459749] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459749] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459749] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459750] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459750] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459750] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459751] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459751] results received
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459751] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459752] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:46:28 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459752] results received
-- 2020-11-11 22:46:29 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459752] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:29 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459753] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:46:29 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459753] results received
-- 2020-11-11 22:46:29 [testy2] [MSSQL] [introspection] [session id: 1601179856] [statement id: 591459753] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:46:29 [testy2] [MSSQL] [session id: 1601179856] disconnected
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [session id: 1601179857] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459754] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459754] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459754] finished - execution time: 1 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459755] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459755] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459755] finished - execution time: 6 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459756] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459756] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459756] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459757] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459757] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459757] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459758] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459758] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459758] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459759] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459759] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459759] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459760] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459760] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459760] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459761] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459761] results received
-- 2020-11-11 22:46:40 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459761] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459762] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459762] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459762] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459763] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459763] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459763] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459764] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459764] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459764] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459765] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459765] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459765] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459766] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459766] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459766] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459767] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459767] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459767] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459768] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459768] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459768] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459769] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459769] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459769] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459770] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459770] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459770] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459771] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459771] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459771] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459772] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459772] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459772] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459773] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459773] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459773] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459774] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459774] results received
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [introspection] [session id: 1601179857] [statement id: 591459774] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:46:41 [testy2] [MSSQL] [session id: 1601179857] disconnected
-- 2020-11-11 22:46:51 [testy2] [PsqlDatabase@localhost] [session id: 1601179852] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459775] 
create table test.my_table02
(
	column_1 int,
	column_2 int,
	column_3 int,
	column_4 int
)
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459775] finished - execution time: 16 ms
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [session id: 1601179858] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459776] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459776] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459776] finished - execution time: 1 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459777] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459777] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459777] finished - execution time: 7 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459778] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459778] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459778] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459779] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459779] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459779] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459780] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459780] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459780] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459781] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459781] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459781] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459782] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459782] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459782] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459783] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459783] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459783] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459784] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459784] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459784] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459785] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459785] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459785] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459786] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459786] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459786] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459787] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459787] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459787] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459788] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459788] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459788] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459789] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459789] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459789] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459790] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459790] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459790] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459791] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459791] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459791] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459792] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459792] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459792] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459793] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459793] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459793] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459794] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459794] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459794] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459795] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459795] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459795] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459796] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459796] results received
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [introspection] [session id: 1601179858] [statement id: 591459796] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:13 [testy2] [MSSQL] [session id: 1601179858] disconnected
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [session id: 1601179859] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459797] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459797] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459797] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459798] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459798] results received
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459798] finished - execution time: 1 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459799] 
SET ROWCOUNT 501
-- ] --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459799] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459800] 
SELECT t.* FROM master.dbo.table_test t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459800] results received
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459800] finished - execution time: 2 ms, fetching time: 23 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459801] 
SET ROWCOUNT 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:26 [testy2] [MSSQL] [data import] [session id: 1601179859] [statement id: 591459801] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459802] 
create table test.table_test
(
	column_1 int,
	column_2 char
)
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459802] finished - execution time: 7 ms
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [session id: 1601179859] disconnected
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [session id: 1601179860] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179860] [statement id: 591459803] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179860] [statement id: 591459803] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179860] [statement id: 591459803] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179860] [statement id: 591459804] 
SELECT TOP 1 t.* FROM master.test.table_test t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179860] [statement id: 591459804] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179860] [statement id: 591459804] finished - execution time: 1 ms, fetching time: 7 ms, total result sets count: 1
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [session id: 1601179861] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459805] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459805] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459805] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459806] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459806] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459806] finished - execution time: 7 ms, fetching time: 5 ms, total result sets count: 1
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [session id: 1601179862] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459807] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459807] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459807] finished - execution time: 3 ms, fetching time: 9 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179862] [statement id: 591459808] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179862] [statement id: 591459808] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179862] [statement id: 591459808] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459809] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459809] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459809] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179862] [statement id: 591459810] 
SELECT COUNT(*) FROM master.dbo.table_test t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179862] [statement id: 591459810] results received
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459811] 
select X.major_id object_id, X.minor_id as position,
       X.name as name, cast(X.value as varchar(max)) as value, SQL_VARIANT_PROPERTY(X.value, 'BaseType') as type
from master.sys.extended_properties X
where X.class = 0
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179862] [statement id: 591459810] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459811] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459811] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459812] 
select cast(database_id as varchar(20)) + '.' + cast(cast(create_date as bigint) as varchar(20)) + '/' + cast(service_broker_guid as varchar(60)) + '@' + @@servername as fingerprint
from sys.databases
where /* name = db_name() */database_id = db_id() 
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459812] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459812] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459813] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459813] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459813] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459814] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459814] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459814] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [session id: 1601179862] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459815] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459815] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459815] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459816] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459816] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459816] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459817] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459817] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459817] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459818] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459818] results received
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459818] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [session id: 1601179863] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459819] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459819] results received
-- [ --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [data import] [session id: 1601179863] [statement id: 591459820] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:47:29 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459819] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [data import] [session id: 1601179863] [statement id: 591459820] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [data import] [session id: 1601179863] [statement id: 591459820] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459821] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [data import] [session id: 1601179863] [statement id: 591459822] 
SELECT t.* FROM master.dbo.table_test t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459821] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459821] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459823] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [data import] [session id: 1601179863] [statement id: 591459822] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459823] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459823] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [data import] [session id: 1601179863] [statement id: 591459822] finished - execution time: 2 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459824] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459824] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459824] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459825] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459825] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459825] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459826] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459826] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459826] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459827] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459827] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459827] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459828] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459828] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459828] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [session id: 1601179863] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459829] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459829] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459829] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459830] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459830] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179861] [statement id: 591459830] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [session id: 1601179860] disconnected
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [session id: 1601179861] disconnected
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [session id: 1601179864] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459831] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459831] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459831] finished - execution time: 1 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459832] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459832] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459832] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459833] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459833] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459833] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459834] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459834] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459834] finished - execution time: 2 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459835] 
select X.major_id object_id, X.minor_id as position,
       X.name as name, cast(X.value as varchar(max)) as value, SQL_VARIANT_PROPERTY(X.value, 'BaseType') as type
from master.sys.extended_properties X
where X.class = 0
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459835] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459835] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459836] 
select cast(database_id as varchar(20)) + '.' + cast(cast(create_date as bigint) as varchar(20)) + '/' + cast(service_broker_guid as varchar(60)) + '@' + @@servername as fingerprint
from sys.databases
where /* name = db_name() */database_id = db_id() 
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459836] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459836] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459837] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459837] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459837] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459838] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459838] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459838] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459839] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459839] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459839] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459840] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459840] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459840] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459841] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459841] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459841] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459842] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459842] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459842] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459843] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459843] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459843] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459844] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459844] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459844] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459845] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459845] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459845] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459846] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459846] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459846] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459847] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459847] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459847] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459848] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459848] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459848] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459849] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459849] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459849] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459850] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459850] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459850] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459851] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459851] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459851] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459852] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459852] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459852] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459853] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459853] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459853] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459854] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459854] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459854] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459855] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459855] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459855] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459856] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459856] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459856] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459857] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459857] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459857] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459858] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459858] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459858] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459859] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459859] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459859] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459860] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459860] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459860] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459861] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459861] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459861] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459862] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459862] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459862] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459863] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459863] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459863] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459864] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459864] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459864] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459865] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459865] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459865] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459866] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459866] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459866] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459867] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459867] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459867] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459868] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459868] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459868] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459869] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459869] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459869] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459870] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459870] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459870] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459871] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459871] results received
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [introspection] [session id: 1601179864] [statement id: 591459871] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:47:30 [testy2] [MSSQL] [session id: 1601179864] disconnected
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [session id: 1601179865] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459872] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459872] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459872] finished - execution time: 2 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459873] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459873] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459873] finished - execution time: 5 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459874] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459874] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459874] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459875] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459875] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459875] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459876] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459876] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459876] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459877] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459877] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459877] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459878] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459878] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459878] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459879] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459879] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459879] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459880] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459880] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459880] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459881] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459881] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459881] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459882] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459882] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459882] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459883] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459883] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459883] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459884] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459884] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459884] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459885] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459885] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459885] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459886] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459886] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459886] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459887] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459887] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459887] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459888] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459888] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459888] finished - execution time: 6 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459889] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459889] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459889] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459890] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459890] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459890] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459891] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459891] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459891] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459892] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459892] results received
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [introspection] [session id: 1601179865] [statement id: 591459892] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:47:41 [testy2] [MSSQL] [session id: 1601179865] disconnected
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [session id: 1601179866] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459893] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459893] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459893] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459894] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459894] results received
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459894] finished - execution time: 1 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459895] 
SET ROWCOUNT 501
-- ] --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459895] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459896] 
SELECT t.* FROM master.dbo.spt_fallback_db t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459896] results received
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459896] finished - execution time: 2 ms, fetching time: 18 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459897] 
SET ROWCOUNT 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:56 [testy2] [MSSQL] [data import] [session id: 1601179866] [statement id: 591459897] finished - execution time: 1 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459898] 
create table test.spt_fallback_db
(
	xserver_name varchar(30),
	xdttm_ins datetime,
	xdttm_last_ins_upd datetime,
	xfallback_dbid smallint,
	name varchar(30),
	dbid smallint,
	status smallint,
	version smallint
)
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [refactoring] [session id: 1601179854] [statement id: 591459898] finished - execution time: 15 ms
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179866] disconnected
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179867] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179867] [statement id: 591459899] 
use master
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179867] [statement id: 591459899] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179867] [statement id: 591459899] finished - execution time: 2 ms
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179867] [statement id: 591459900] 
SELECT TOP 1 t.* FROM master.test.spt_fallback_db t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179867] [statement id: 591459900] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179867] [statement id: 591459900] finished - execution time: 2 ms, fetching time: 29 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179868] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459901] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459901] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459901] finished - execution time: 2 ms, fetching time: 26 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179869] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179869] [statement id: 591459902] 
use master
-- ] --------------------------------------------------
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459903] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179869] [statement id: 591459902] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179869] [statement id: 591459902] finished - execution time: 1 ms
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459903] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459903] finished - execution time: 6 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179869] [statement id: 591459904] 
SELECT COUNT(*) FROM master.dbo.spt_fallback_db t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179869] [statement id: 591459904] results received
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459905] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179869] [statement id: 591459904] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459905] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459905] finished - execution time: 4 ms, fetching time: 13 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179869] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459906] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459906] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459906] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179870] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459907] 
select X.major_id object_id, X.minor_id as position,
       X.name as name, cast(X.value as varchar(max)) as value, SQL_VARIANT_PROPERTY(X.value, 'BaseType') as type
from master.sys.extended_properties X
where X.class = 0
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459907] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459907] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179870] [statement id: 591459908] 
use master
-- ] --------------------------------------------------
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459909] 
select cast(database_id as varchar(20)) + '.' + cast(cast(create_date as bigint) as varchar(20)) + '/' + cast(service_broker_guid as varchar(60)) + '@' + @@servername as fingerprint
from sys.databases
where /* name = db_name() */database_id = db_id() 
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179870] [statement id: 591459908] warning - [S0001][5701] Changed database context to 'master'.
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179870] [statement id: 591459908] finished - execution time: 1 ms
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459909] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459909] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179870] [statement id: 591459910] 
SELECT t.* FROM master.dbo.spt_fallback_db t
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179870] [statement id: 591459910] results received
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459911] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459911] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459911] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459912] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459912] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459912] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [data import] [session id: 1601179870] [statement id: 591459910] finished - execution time: 2 ms, fetching time: 16 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459913] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459913] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459913] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459914] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459914] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459914] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179870] disconnected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459915] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459915] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459915] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459916] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459916] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179868] [statement id: 591459916] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179867] disconnected
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179868] disconnected
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [session id: 1601179871] connected
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459917] 
select db_name() as a
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459917] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459917] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459918] 
select database_id as id, name, cast(databasepropertyex(name,'collation') as char) as collation_name
from sys.databases
order by case when /* name = db_name() */database_id = db_id()  then 1 else 0 end desc, database_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459918] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459918] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459919] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459919] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459919] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459920] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459920] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459920] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459921] 
select X.major_id object_id, X.minor_id as position,
       X.name as name, cast(X.value as varchar(max)) as value, SQL_VARIANT_PROPERTY(X.value, 'BaseType') as type
from master.sys.extended_properties X
where X.class = 0
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459921] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459921] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459922] 
select cast(database_id as varchar(20)) + '.' + cast(cast(create_date as bigint) as varchar(20)) + '/' + cast(service_broker_guid as varchar(60)) + '@' + @@servername as fingerprint
from sys.databases
where /* name = db_name() */database_id = db_id() 
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459922] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459922] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459923] 
select schema_id as id, name
from master.sys.schemas
order by case when schema_id = schema_id() then 1 else 0 end desc, schema_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459923] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459923] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459924] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459924] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459924] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459925] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459925] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459925] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459926] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459926] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459926] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459927] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459927] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459927] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459928] 
select current_timestamp
-- ] --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459928] results received
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459928] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:58 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459929] 
select object_id
from master.sys.all_objects
where schema_id = ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459929] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459929] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459930] 
select cast(I.object_id as bigint) * 100000 + (I.index_id % 30000) as Combi_Id
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.object_id = I.object_id
  and I.type != 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459930] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459930] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459931] 
select F.object_id
from master.sys.fulltext_indexes F,
     master.sys.all_objects T
where T.schema_id = ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459931] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459931] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459932] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459932] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459932] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459933] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459933] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459933] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459934] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459934] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459934] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459935] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459935] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459935] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459936] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459936] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459936] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459937] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459937] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459937] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459938] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459938] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459938] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459939] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459939] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459939] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459940] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459940] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459940] finished - execution time: 45 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459941] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459941] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459941] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459942] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459942] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459942] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459943] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459943] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459943] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459944] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459944] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459944] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459945] 
select object_id,
       name,
       create_date,
       modify_date
from master.sys.objects
where schema_id = ?
  and type = 'R'
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459945] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459945] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459946] 
with CT as ( select cast(1 + is_table_type + is_assembly_type * 2 as tinyint) as type_kind,
                    abs(cast(checksum(user_type_id, name) as bigint)) as c_s
                    from master.sys.types
                    where schema_id = ?
                      and is_user_defined >= 1 )
select type_kind, sum(c_s) as check_sum
from CT
group by type_kind
order by type_kind
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459946] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459946] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459947] 
select object_id,
       name,
       rtrim(type) as type,
       create_date,
       modify_date,
       is_ms_shipped
from master.sys.all_objects
where type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT')
  and schema_id = ?
  and modify_date >= ?
order by create_date
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459947] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459947] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459948] 
select T.object_id,
       I.index_id % 30000 as position,
       I.name,
       I.type,
       I.filter_definition, 
       I.is_unique,
       I.is_disabled
from master.sys.all_objects T,
     master.sys.indexes I
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
order by T.create_date, I.object_id, I.index_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459948] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459948] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459949] 
select T.object_id,
       X.index_id % 30000 as index_position,
       C.name,
       X.is_descending_key as is_desc,
       X.is_included_column
from master.sys.all_objects T,
     master.sys.indexes I,
     master.sys.index_columns X,
     master.sys.all_columns C
where T.schema_id = ?
  and T.type in ('U','S','IT','V','TT')
  and T.modify_date >= ?
  and T.object_id = I.object_id
  and I.type != 0
  and I.object_id = X.object_id
  and I.index_id = X.index_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
order by T.create_date, X.object_id, X.index_id, X.key_ordinal, X.index_column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459949] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459949] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459950] 
select F.object_id,
       F.unique_index_id
from master.sys.all_objects T,
     master.sys.fulltext_indexes F
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = F.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459950] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459950] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459951] 
select T.object_id,
       C.name
from sys.all_objects T,
     sys.fulltext_index_columns X,
     sys.all_columns C
where T.schema_id = ?
  and T.modify_date >= ?
  and T.object_id = X.object_id
  and X.object_id = C.object_id
  and X.column_id = C.column_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459951] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459951] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459952] 
select T.object_id as table_id,
       K.object_id as key_id,
       K.unique_index_id % 30000 as index_position,
       K.name,
       case when K.type = 'PK' then 1 else 0 end as is_primary,
       K.is_system_named,
       K.create_date,
       K.modify_date
from master.sys.all_objects T
     join master.sys.key_constraints K on T.object_id = K.parent_object_id and T.schema_id = K.schema_id
where T.schema_id = ?
  and T.modify_date >= ?
order by T.create_date, T.object_id, is_primary desc, K.create_date, K.object_id
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459952] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459952] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459953] 
select O.parent_object_id as table_id,
       O.object_id as trigger_id,
       O.name,
       O.create_date,
       O.modify_date,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and type between 1 and 3
         group by object_id ) as events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_first = 1
           and type between 1 and 3
         group by object_id ) as first_events,
       ( select sum(power(2,type-1))
         from master.sys.trigger_events
         where object_id = O.object_id
           and is_last = 1
           and type between 1 and 3
         group by object_id ) as last_events,
       T.is_instead_of_trigger,
       T.is_not_for_replication,
       T.is_disabled,
       C.encrypted
from master.sys.objects O
     inner join master.sys.triggers T on O.object_id = T.object_id
     left outer join master.sys.syscomments C on O.object_id = C.id
where O.schema_id = ?
  and O.modify_date >= ?
  and O.type in ('TA','TR')
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459953] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459953] finished - execution time: 5 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459954] 
select object_id,
       name,
       create_date,
       modify_date,
       parsename(base_object_name, 3) as origin_db_name,
       parsename(base_object_name, 2) as origin_schema_name,
       parsename(base_object_name, 1) as origin_object_name,
       object_id(base_object_name)    as origin_id
from master.sys.synonyms
where schema_id = ?
  and modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459954] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459954] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459955] 
select
  Q.name,
  Q.object_id,
  Q.create_date,
  Q.modify_date,
  Q.start_value,
  Q.last_used_value /* current_value */ as current_value,
  Q.increment,
  Q.minimum_value,
  Q.maximum_value,
  Q.is_cycling,
  Q.is_cached,
  Q.cache_size,
  TS.name as system_type_name,
  T.name as type_name,
  S.name as type_schema_name,
  Q.precision
from
  sys.sequences Q
      join sys.types TS on TS.system_type_id = Q.system_type_id
      join sys.types T on T.user_type_id = Q.user_type_id
      join sys.schemas S on S.schema_id = T.schema_id
where
  Q.schema_id = ? and TS.is_user_defined = 0
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459955] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459955] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459956] 
select sum(abs(cast(checksum(major_id, minor_id, cast(value as varchar(40))) as bigint))) as checksum
from master.sys.extended_properties X
     left join master.sys.all_objects O
        on O.object_id = X.major_id
       and O.type in ('U','S','IT','V','FN','IF','P','X','PC','TF','TT','C','F','D','PK','SN','SO','UQ','TR')
       and X.class <> 6
       and X.class <> 3
     left join master.sys.types T
        on T.user_type_id = X.major_id
       and X.class = 6
where coalesce(O.schema_id, T.schema_id, case when X.class = 3 then X.major_id else null end) = ?
  and X.value is not null
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459956] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459956] finished - execution time: 1 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459957] 
select O.parent_object_id as parent_id,
       M.object_id,
       case when O.type = 'TR' or O.type = 'TA' then 1 else 0 end as is_trigger,
       M.definition as text
from master.sys.sql_modules M
     inner join master.sys.objects O on M.object_id = O.object_id
where O.schema_id = ?
  and O.modify_date >= ?
-- ] --------------------------------------------------
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459957] results received
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [introspection] [session id: 1601179871] [statement id: 591459957] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- 2020-11-11 22:47:59 [testy2] [MSSQL] [session id: 1601179871] disconnected
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [session id: 1567851451] connected
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] [statement id: 2137179608] 
create schema test
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] [statement id: 2137179608] error - [HY000][1007] Can't create database 'test'; database exists
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] [statement id: 2137179608] finished - execution time: 43 ms
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] warning - [HY000][1007] Can't create database 'test'; database exists
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [session id: 1567851452] connected
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179609] 
select database()
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179609] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179609] finished - execution time: 82 ms, fetching time: 33 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179610] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179610] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179610] finished - execution time: 4 ms, fetching time: 14 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179611] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179611] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179611] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179612] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179612] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179612] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179613] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179613] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179613] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179614] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179614] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179614] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179615] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179615] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179615] finished - execution time: 3 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179616] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179616] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179616] finished - execution time: 3 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179617] 
select collation_name, character_set_name,
          is_default collate utf8_general_ci = 'Yes' as is_default
        from information_schema.collations
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179617] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179617] finished - execution time: 6 ms, fetching time: 17 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179618] 
select grantee from information_schema.user_privileges group by grantee
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179618] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179618] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179619] 
show grants for 'debian-sys-maint'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179619] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179619] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179620] 
show grants for 'mysql.infoschema'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179620] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179620] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179621] 
show grants for 'mysql.session'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179621] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179621] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179622] 
show grants for 'mysql.sys'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179622] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179622] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179623] 
show grants for 'root'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179623] results received
-- 2020-11-12 01:01:16 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179623] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179624] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179624] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179624] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179625] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179625] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179625] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179626] 
select table_name, table_type, table_comment, engine, table_collation
        from information_schema.tables
        where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179626] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179626] finished - execution time: 4 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179627] 
select
        ordinal_position,
        column_name,
        column_type,
        column_default,
        generation_expression,
        table_name,
        column_comment,
        is_nullable,
        extra,
        collation_name
      from information_schema.columns
      where table_schema = ?
      order by table_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179627] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179627] finished - execution time: 3 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179628] 
select
          table_name,
          index_name,
          index_comment,
          index_type,
          non_unique,
          column_name,
          collation,
          expression
        from information_schema.statistics
        where table_schema = ? and
              index_schema = ? and
              index_name collate utf8_general_ci <> 'PRIMARY'
        order by
          index_schema,
          table_name,
          index_name,
          seq_in_index
        
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179628] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179628] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179629] 
select
        c.constraint_name,
        c.table_name,
        c.constraint_type,
        r.match_option,
        r.update_rule,
        r.delete_rule
      from information_schema.table_constraints c
        left join information_schema.referential_constraints r on
            r.constraint_schema   = c.constraint_schema
        and r.constraint_name     = c.constraint_name
      where c.table_schema = ?
    
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179629] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179629] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179630] 
select
        constraint_name,
        table_name,
        column_name,
        referenced_table_schema,
        referenced_table_name,
        referenced_column_name
      from information_schema.key_column_usage
      where table_schema = ?
      order by
          table_name
        , constraint_name
        , ordinal_position
    
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179630] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179630] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179631] 
select
          trigger_name,
          event_object_table,
          event_manipulation,
          action_timing,
          definer
        from information_schema.triggers
        where trigger_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179631] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179631] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179632] 
select
          event_name,
          event_comment,
          definer,
          event_type = 'RECURRING' recurring,
          interval_value,
          interval_field,
          cast(coalesce(starts, execute_at) as char) starts,
          cast(ends as char) ends,
          status,
          on_completion = 'PRESERVE' preserve,
          last_executed
        from information_schema.events
        where event_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179632] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179632] finished - execution time: 3 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179633] 
select
          routine_name,
          routine_type,
          routine_definition,
          routine_comment,
          dtd_identifier,
          definer
        from information_schema.routines
        where routine_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179633] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179633] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179634] 
select specific_name,
        ordinal_position,
        parameter_name,
        parameter_mode,
        dtd_identifier
      from information_schema.parameters
      where specific_schema = ? and ordinal_position > 0
      order by specific_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179634] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179634] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179635] 
select table_name, view_definition, definer
      from information_schema.views
      where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179635] results received
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851452] [statement id: 2137179635] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-12 01:01:17 [testy2] [MySQL1@localhost] [session id: 1567851452] disconnected
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] [statement id: 2137179636] 
use test
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] [statement id: 2137179636] finished - execution time: 3 ms
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] [statement id: 2137179637] 
drop table table_name
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [refactoring] [session id: 1567851451] [statement id: 2137179637] finished - execution time: 12 ms
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [session id: 1567851453] connected
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179638] 
select database()
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179638] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179638] finished - execution time: 3 ms, fetching time: 7 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179639] 
select @@event_scheduler
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179639] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179639] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179640] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179640] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179640] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179641] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179641] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179641] finished - execution time: 6 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179642] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179642] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179642] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179643] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179643] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179643] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179644] 
select @@GLOBAL.lower_case_table_names
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179644] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179644] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179645] 
select schema_name, default_collation_name
        from information_schema.schemata
        order by if(schema() = schema_name, 1, 2), schema_name
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179645] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179645] finished - execution time: 8 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179646] 
select collation_name, character_set_name,
          is_default collate utf8_general_ci = 'Yes' as is_default
        from information_schema.collations
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179646] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179646] finished - execution time: 9 ms, fetching time: 11 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179647] 
select grantee from information_schema.user_privileges group by grantee
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179647] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179647] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179648] 
show grants for 'debian-sys-maint'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179648] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179648] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179649] 
show grants for 'mysql.infoschema'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179649] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179649] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179650] 
show grants for 'mysql.session'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179650] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179650] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179651] 
show grants for 'mysql.sys'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179651] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179651] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179652] 
show grants for 'root'@'localhost'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179652] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179652] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179653] 
select @@default_storage_engine, @@default_tmp_storage_engine
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179653] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179653] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179654] 
select table_name from information_schema.tables
        where table_schema collate utf8_general_ci = 'information_schema'
          and table_name collate utf8_general_ci = 'parameters'
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179654] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179654] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179655] 
select table_name, table_type, table_comment, engine, table_collation
        from information_schema.tables
        where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179655] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179655] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179656] 
select
        ordinal_position,
        column_name,
        column_type,
        column_default,
        generation_expression,
        table_name,
        column_comment,
        is_nullable,
        extra,
        collation_name
      from information_schema.columns
      where table_schema = ?
      order by table_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179656] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179656] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179657] 
select
          table_name,
          index_name,
          index_comment,
          index_type,
          non_unique,
          column_name,
          collation,
          expression
        from information_schema.statistics
        where table_schema = ? and
              index_schema = ? and
              index_name collate utf8_general_ci <> 'PRIMARY'
        order by
          index_schema,
          table_name,
          index_name,
          seq_in_index
        
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179657] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179657] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179658] 
select
        c.constraint_name,
        c.table_name,
        c.constraint_type,
        r.match_option,
        r.update_rule,
        r.delete_rule
      from information_schema.table_constraints c
        left join information_schema.referential_constraints r on
            r.constraint_schema   = c.constraint_schema
        and r.constraint_name     = c.constraint_name
      where c.table_schema = ?
    
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179658] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179658] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179659] 
select
        constraint_name,
        table_name,
        column_name,
        referenced_table_schema,
        referenced_table_name,
        referenced_column_name
      from information_schema.key_column_usage
      where table_schema = ?
      order by
          table_name
        , constraint_name
        , ordinal_position
    
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179659] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179659] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179660] 
select
          trigger_name,
          event_object_table,
          event_manipulation,
          action_timing,
          definer
        from information_schema.triggers
        where trigger_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179660] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179660] finished - execution time: 5 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179661] 
select
          event_name,
          event_comment,
          definer,
          event_type = 'RECURRING' recurring,
          interval_value,
          interval_field,
          cast(coalesce(starts, execute_at) as char) starts,
          cast(ends as char) ends,
          status,
          on_completion = 'PRESERVE' preserve,
          last_executed
        from information_schema.events
        where event_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179661] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179661] finished - execution time: 4 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179662] 
select
          routine_name,
          routine_type,
          routine_definition,
          routine_comment,
          dtd_identifier,
          definer
        from information_schema.routines
        where routine_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179662] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179662] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179663] 
select specific_name,
        ordinal_position,
        parameter_name,
        parameter_mode,
        dtd_identifier
      from information_schema.parameters
      where specific_schema = ? and ordinal_position > 0
      order by specific_name, ordinal_position
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179663] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179663] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179664] 
select table_name, view_definition, definer
      from information_schema.views
      where table_schema = ?
      
-- ] --------------------------------------------------
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179664] results received
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [introspection] [session id: 1567851453] [statement id: 2137179664] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- 2020-11-12 01:02:46 [testy2] [MySQL1@localhost] [session id: 1567851453] disconnected
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [session id: 1567851454] connected
-- [ --------------------------------------------------
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851454] [statement id: 2137179665] 
select distinct oid, xmin
from pg_catalog.pg_namespace
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_type
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_class
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_proc
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_operator
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_constraint
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_collation
where oid in (2200)
union

select distinct oid, xmin
from pg_catalog.pg_rewrite
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_trigger
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_am
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_data_wrapper
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_foreign_server
where oid in (2200)
union
select distinct oid, xmin
from pg_catalog.pg_extension
where oid in (2200)

/* union
select distinct oid, xmin
from pg_catalog.pg_user_mapping
where oid in (2200)
*/
-- ] --------------------------------------------------
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851454] [statement id: 2137179665] results received
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851454] [statement id: 2137179665] finished - execution time: 24 ms, fetching time: 19 ms, total result sets count: 1
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [session id: 1567851454] disconnected
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [session id: 1567851455] connected
-- [ --------------------------------------------------
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1567851455] [statement id: 2137179666] 
create table test.new_table
(
	column_1 int,
	column_2 int,
	column_3 int
)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:21 [testy2] [PsqlDatabase@localhost] [refactoring] [session id: 1567851455] [statement id: 2137179666] finished - execution time: 4 ms
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [session id: 1567851456] connected
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179667] 
select round(extract(epoch from pg_postmaster_start_time() at time zone 'UTC')) as startup_time
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179667] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179667] finished - execution time: 7 ms, fetching time: 6 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179668] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179668] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179668] finished - execution time: 6 ms, fetching time: 8 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179669] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179669] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179669] finished - execution time: 4 ms, fetching time: 13 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179670] 
show DateStyle
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179670] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179670] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179671] 
select name, is_dst from pg_catalog.pg_timezone_names
union distinct
select abbrev as name, is_dst from pg_catalog.pg_timezone_abbrevs
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179671] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179671] finished - execution time: 72 ms, fetching time: 15 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179672] 
select R.oid::bigint as role_id, rolname as role_name,
  rolsuper is_super, rolinherit is_inherit,
  rolcreaterole can_createrole, rolcreatedb can_createdb,
  rolcanlogin can_login, rolreplication /* false */ is_replication,
  rolconnlimit conn_limit, rolvaliduntil valid_until,
  rolbypassrls /* false */ bypass_rls, rolconfig config,
  D.description
from pg_catalog.pg_roles R
  left join pg_catalog.pg_shdescription D on D.objoid = R.oid
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179672] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179672] finished - execution time: 4 ms, fetching time: 5 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179673] 
select N.oid::bigint as id,
       datname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.datdba) as "owner"
from pg_catalog.pg_database N
  left join pg_catalog.pg_shdescription D on N.oid = D.objoid
where not datistemplate
order by case when datname = pg_catalog.current_database() then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179673] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179673] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179674] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179674] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179674] finished - execution time: 7 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179675] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179675] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179675] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179676] 
select N.oid::bigint as id,
       N.xmin as state_number,
       nspname as name,
       D.description,
       pg_catalog.pg_get_userbyid(N.nspowner) as "owner"
from pg_catalog.pg_namespace N
  left join pg_catalog.pg_description D on N.oid = D.objoid
/* */where N.nspname not like 'pg_toast%' and N.nspname not like 'pg_temp%' 
order by case when nspname = current_schema then -1::bigint else N.oid::bigint end
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179676] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179676] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179677] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179677] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179677] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179678] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179678] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179678] finished - execution time: 2 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179679] 
select usesuper
from pg_user
where usename = current_user
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179679] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179679] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179680] 
select lanname
from pg_catalog.pg_language
order by lanname
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179680] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179680] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179681] 
select distinct oid
from pg_catalog.pg_am
union
select distinct oid
from pg_catalog.pg_foreign_data_wrapper
union
select distinct oid
from pg_catalog.pg_foreign_server
union
select distinct oid
from pg_catalog.pg_extension

union
select distinct oid
from pg_catalog.pg_user_mapping

-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179681] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179681] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179682] 
select D.objoid id
from pg_catalog.pg_description D
where D.classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179682] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179682] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179683] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179683] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179683] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179684] 
select A.oid as access_method_id,
       A.xmin as state_number,
       A.amname as access_method_name
       ,
       A.amhandler::oid as handler_id,
       pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as handler_name,
       A.amtype as access_method_type
       
from pg_am A
  join pg_proc P on A.amhandler::oid = P.oid
  join pg_namespace N on P.pronamespace = N.oid
  
where pg_catalog.age(A.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179684] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179684] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179685] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179685] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179685] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179686] 
select fdw.oid as id,
       fdw.xmin as state_number,
       fdw.fdwname as name,
       pr.proname as handler,
       nspc.nspname as handler_schema,
       pr2.proname as validator,
       nspc2.nspname as validator_schema,
       fdw.fdwoptions as options,
       pg_catalog.pg_get_userbyid(fdw.fdwowner) as "owner"
from pg_catalog.pg_foreign_data_wrapper fdw
     left outer join pg_catalog.pg_proc pr on fdw.fdwhandler = pr.oid
     left outer join pg_catalog.pg_namespace nspc on pr.pronamespace = nspc.oid
     left outer join pg_catalog.pg_proc pr2 on fdw.fdwvalidator = pr2.oid
     left outer join pg_catalog.pg_namespace nspc2 on pr2.pronamespace = nspc2.oid
  where pg_catalog.age(fdw.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179686] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179686] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179687] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179687] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179687] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179688] 
select srv.oid as id,
       srv.srvfdw as fdw_id,
       srv.xmin as state_number,
       srv.srvname as name,
       srv.srvtype as type,
       srv.srvversion as version,
       srv.srvoptions as options,
       pg_catalog.pg_get_userbyid(srv.srvowner) as "owner"
from pg_catalog.pg_foreign_server srv
  where pg_catalog.age(srv.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179688] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179688] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179689] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179689] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179689] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179690] 
select pg_extension.oid as id,
       pg_extension.xmin as state_number,
       extname as name,
       extversion as version,
       extnamespace as schema_id,
       nspname as schema_name,
       array(select target
             from pg_extension_update_paths(extname)
             where source = extversion and path is not null) as available_updates
from pg_catalog.pg_extension
  join pg_namespace on pg_extension.extnamespace = pg_namespace.oid
where pg_catalog.age(pg_extension.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179690] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179690] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179691] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179691] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179691] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179692] 
select D.objoid id, case
    when 'pg_catalog.pg_am'::regclass = classoid then 'A'
    when 'pg_catalog.pg_foreign_data_wrapper'::regclass = classoid then 'W'
    when 'pg_catalog.pg_foreign_server'::regclass = classoid then 'S'
    when 'pg_catalog.pg_extension'::regclass = classoid then 'E'
    
  end as kind,
  D.objsubid sub_id, D.description
from pg_catalog.pg_description D
where classoid in (
  'pg_catalog.pg_am'::regclass,
  'pg_catalog.pg_foreign_data_wrapper'::regclass,
  'pg_catalog.pg_foreign_server'::regclass
  ,
  'pg_catalog.pg_extension'::regclass
  
)
and pg_catalog.age(D.xmin) <= pg_catalog.age(?::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179692] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179692] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179693] 
select pg_catalog.age(?::varchar::xid) as database_age
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179693] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179693] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179694] 
select 'sequence' as dependent_kind,
       'table' as owner_kind,
       D.objid as dependent_id,
       D.refobjid as owner_id,
       D.refobjsubid as owner_subobject_id
from pg_depend D
  join pg_class C_SEQ on D.objid = C_SEQ.oid
  join pg_class C_TAB on D.refobjid = C_TAB.oid
where C_SEQ.relkind = 'S'
  and C_TAB.relkind = 'r'
  and D.refobjsubid <> 0
  and (D.deptype = 'a' or D.deptype = 'i')
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179694] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179694] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179695] 
with saved_age as (select greatest(pg_catalog.age(?::varchar::xid), pg_catalog.age(?::varchar::xid)) as "value")
select pg_catalog.age(C.last_tx) <= (case when SA."value" < 0 then 2147483647 else SA."value" end) as has_changes from
(
  select X.last_tx as last_tx
  from (
    (
    select xmin as last_tx
      from pg_catalog.pg_type
      where typnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_class
      where relnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_proc
      where pronamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_operator
      where oprnamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select A.xmin as last_tx
      from pg_catalog.pg_attribute A join pg_catalog.pg_class K on K.oid = A.attrelid
      where K.relnamespace = ?::oid
      order by pg_catalog.age(A.xmin)
      limit 1
    )
    union all
    (
    select E.xmin as last_tx
      from pg_catalog.pg_enum E join pg_catalog.pg_type T on T.oid = E.enumtypid
      where T.typnamespace = ?::oid
      order by pg_catalog.age(E.xmin)
      limit 1
    )
    union all
    (
    select xmin as last_tx
      from pg_catalog.pg_constraint
      where connamespace = ?::oid
      order by pg_catalog.age(xmin)
      limit 1
    )
    union all
    (
    select CO.xmin as last_tx
      from pg_catalog.pg_collation CO
      where CO.collnamespace = ?::oid
      order by pg_catalog.age(CO.xmin)
      limit 1
    )
    union all
    
    (
    select IX.xmin as last_tx
      from pg_catalog.pg_index IX,
           pg_catalog.pg_class IC
      where IC.oid = IX.indrelid
        and IC.relnamespace = ?::oid
        order by pg_catalog.age(IX.xmin)
        limit 1
    )
    union all
    (
    select RU.xmin as last_tx
      from pg_catalog.pg_rewrite RU,
           pg_catalog.pg_class RC
      where RC.oid = RU.ev_class
        and RC.relnamespace = ?::oid
        order by pg_catalog.age(RU.xmin)
        limit 1
    )
    union all
    (
    select TG.xmin as last_tx
      from pg_catalog.pg_trigger TG,
           pg_catalog.pg_class TC
      where TC.oid = TG.tgrelid
        and TC.relnamespace = ?::oid
        order by pg_catalog.age(TG.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_class C on C.oid = D.objoid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_constraint C on C.oid = D.objoid
      where C.connamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_trigger T on T.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = T.tgrelid
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_rewrite R on R.oid = D.objoid
        join pg_catalog.pg_class C on C.oid = R.ev_class
      where C.relnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_proc P on P.oid = D.objoid
      where P.pronamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_type T on T.oid = D.objoid
      where T.typnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_operator O on O.oid = D.objoid
      where O.oprnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    union all
    (
    select D.xmin as last_tx
      from pg_catalog.pg_description D
        join pg_catalog.pg_collation C on C.oid = D.objoid
      where C.collnamespace = ?::oid
        order by pg_catalog.age(D.xmin)
        limit 1
    )
    
  ) X
  order by pg_catalog.age(X.last_tx)
  limit 1
) C, saved_age SA
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179695] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179695] finished - execution time: 9 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179696] 
select case
  when pg_catalog.pg_is_in_recovery()
    then ?
  else
    pg_catalog.txid_current()::varchar::bigint
  end as current_txid
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179696] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179696] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179697] 
select L.transactionid::varchar::bigint as transaction_id
from pg_catalog.pg_locks L
where L.transactionid is not null
order by pg_catalog.age(L.transactionid) desc
limit 1
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179697] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179697] finished - execution time: 7 ms, fetching time: 4 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179698] 
select cls.xmin as sequence_state_number,
       sq.seqrelid as sequence_id,
       cls.relname as sequence_name,
       pg_catalog.format_type(sq.seqtypid, null) as data_type,
       sq.seqstart as next_value,
       sq.seqincrement as inc_value,
       sq.seqmin as min_value,
       sq.seqmax as max_value,
       sq.seqcache as cache_size,
       sq.seqcycle as cycle_option,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_sequence sq
    join pg_class cls on sq.seqrelid = cls.oid
    where cls.relnamespace = ?::oid
          --  and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179698] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179698] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179699] 
select T.oid as type_id,
       T.xmin as type_state_number,
       T.typname as type_name,
       T.typtype as type_sub_kind,
       T.typcategory as type_category,
       T.typrelid as class_id,
       T.typbasetype as base_type_id,
       case when T.typtype in ('c','e') then null
            else pg_catalog.format_type(T.typbasetype, T.typtypmod) end as type_def,
       T.typdefault as default_expression,
       T.typnotnull as mandatory,
       pg_catalog.pg_get_userbyid(T.typowner) as "owner"
from pg_catalog.pg_type T
         left outer join pg_catalog.pg_class C
             on T.typrelid = C.oid
where T.typnamespace = ?::oid
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and (T.typtype in ('d','e') or C.relkind = 'c'::"char" or T.typtype = 'b' and (T.typelem = 0 OR T.typcategory <> 'A'))
order by 1
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179699] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179699] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179700] 
select T.relkind as table_kind,
       T.relname as table_name,
       T.oid as table_id,
       T.xmin as table_state_number,
       false /* T.relhasoids */ as table_with_oids,
       T.relnamespace as tablespace_id,
       T.reloptions as options,
       (select pg_catalog.array_agg(inhparent)::varchar from (select inhparent::bigint from pg_catalog.pg_inherits where T.oid = inhrelid order by inhseqno) as bts) as ancestors,
       (select pg_catalog.array_agg(inhrelid)::varchar from (select inhrelid::bigint from pg_catalog.pg_inherits where T.oid = inhparent order by inhrelid) as its) as successors,
       T.relispartition /* false */ as is_partition,
       pg_catalog.pg_get_partkeydef(T.oid) /* null */ as partition_key,
       pg_catalog.pg_get_expr(T.relpartbound, T.oid) /* null */ as partition_expression,
       pg_catalog.pg_get_userbyid(T.relowner) as "owner"
from pg_catalog.pg_class T
where relnamespace = ?::oid
  and relkind in ('r', 'm', 'v', 'f', 'p')
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_kind, table_id
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179700] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179700] finished - execution time: 3 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179701] 
select ft.ftrelid as table_id,
       srv.srvname as table_server,
       ft.ftoptions as table_options,
       pg_catalog.pg_get_userbyid(cls.relowner) as "owner"
from pg_catalog.pg_foreign_table ft
     left outer join pg_catalog.pg_foreign_server srv on ft.ftserver = srv.oid
     join pg_catalog.pg_class cls on ft.ftrelid = cls.oid
where cls.relnamespace = ?::oid
  --  and pg_catalog.age(ft.xmin) <= pg_catalog.age(:tx::varchar::xid)
order by table_id
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179701] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179701] finished - execution time: 1 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179702] 
with schema_procs as (select prorettype, proargtypes, proallargtypes
                      from pg_catalog.pg_proc
                      where pronamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_opers as (select oprleft, oprright, oprresult
                      from pg_catalog.pg_operator
                      where oprnamespace = ?::oid
                        /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */ ),
     schema_aggregates as (select A.aggtranstype , A.aggmtranstype 
                           from pg_catalog.pg_aggregate A
                           join pg_catalog.pg_proc P
                             on A.aggfnoid = P.oid
                           where P.pronamespace = ?::oid
                           /* and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid)) */),
     schema_arg_types as ( select prorettype as type_id
                           from schema_procs
                           union
                           select distinct unnest(proargtypes) as type_id
                           from schema_procs
                           union
                           select distinct unnest(proallargtypes) as type_id
                           from schema_procs
                           union
                           select oprleft as type_id
                           from schema_opers
                           where oprleft is not null
                           union
                           select oprright as type_id
                           from schema_opers
                           where oprright is not null
                           union
                           select oprresult as type_id
                           from schema_opers
                           where oprresult is not null
                           union
                           select aggtranstype::oid as type_id
                           from schema_aggregates
                           union
                           select aggmtranstype::oid as type_id
                           from schema_aggregates
                           
                           )
select type_id, pg_catalog.format_type(type_id, null) as type_spec
from schema_arg_types
where type_id <> 0
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179702] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179702] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179703] 
with languages as (select oid as lang_oid, lanname as lang
                   from pg_catalog.pg_language),
     routines as (select proname as r_name,
                         prolang as lang_oid,
                         oid as r_id,
                         xmin as r_state_number,
                         proargnames as arg_names,
                         proargmodes as arg_modes,
                         proargtypes::int[] as in_arg_types,
                         proallargtypes::int[] as all_arg_types,
                         pg_catalog.pg_get_expr(proargdefaults, 0) as arg_defaults,
                         provariadic as arg_variadic_id,
                         prorettype as ret_type_id,
                         proretset as ret_set,
                         prokind /* case when proiswindow then 'w'
                                                when proisagg then 'a'
                                                else 'f'
                                           end */ as kind,
                         provolatile as volatile_kind,
                         proisstrict as is_strict,
                         prosecdef as is_security_definer,
                         proconfig as configuration_parameters,
                         procost as cost,
                         pg_catalog.pg_get_userbyid(proowner) as "owner",
                         prorows as rows ,
                         proleakproof as is_leakproof  ,
                         proparallel as concurrency_kind 
                  from pg_catalog.pg_proc
                  where pronamespace = ?::oid
                    and not (prokind = 'a') /* proisagg */
                    /* and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select *
from routines natural join languages
-- ] --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179703] results received
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179703] finished - execution time: 4 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:22 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179704] 
with procedures as (
  select P.oid as function_id,
         pg_catalog.quote_ident(N.nspname) || '.' || pg_catalog.quote_ident(P.proname) as function_name,
         P.prorettype as return_type
  from pg_catalog.pg_proc P
  join pg_catalog.pg_namespace N
    on P.pronamespace = N.oid
),
operators as (
  select O.oid as operator_id,
         pg_catalog.quote_ident(N.nspname) || '.' || O.oprname as operator_name
  from pg_catalog.pg_operator O
  join pg_catalog.pg_namespace N
    on O.oprnamespace = N.oid
)
select P.oid as aggregate_id,
       P.xmin as state_number,
       P.proname as aggregate_name,
       P.proargnames as arg_names,
       P.proargmodes as arg_modes,
       P.proargtypes::int[] as in_arg_types,
       P.proallargtypes::int[] as all_arg_types,
       A.aggtransfn::oid as transition_function_id,
       PT.function_name::text as transition_function_name,
       A.aggtranstype as transition_type,
       A.aggfinalfn::oid as final_function_id,
       case when A.aggfinalfn::oid = 0 then null else PF.function_name end as final_function_name,
       case when A.aggfinalfn::oid = 0 then 0 else PF.return_type end as final_return_type,
       A.agginitval as initial_value,
       A.aggsortop as sort_operator_id,
       case when A.aggsortop = 0 then null else O.operator_name end as sort_operator_name,
       pg_catalog.pg_get_userbyid(P.proowner) as "owner"
       ,
       A.aggfinalextra as final_extra,
       A.aggtransspace as state_size,
       A.aggmtransfn::oid as moving_transition_id,
       case when A.aggmtransfn::oid = 0 then null else FTP.function_name end as moving_transition_name,
       A.aggminvtransfn::oid as inverse_transition_id,
       case when A.aggminvtransfn::oid = 0 then null else ITP.function_name end as inverse_transition_name,
       A.aggmtranstype::oid as moving_state_type,
       A.aggmtransspace as moving_state_size,
       A.aggmfinalfn::oid as moving_final_id,
       case when A.aggmfinalfn::oid = 0 then null else FFP.function_name end as moving_final_name,
       A.aggmfinalextra as moving_final_extra,
       A.aggminitval as moving_initial_value,
       A.aggkind as aggregate_kind,
       A.aggnumdirectargs as direct_args
       
       ,
       A.aggcombinefn::oid as combine_function_id,
       case when A.aggcombinefn::oid = 0 then null else CP.function_name end as combine_function_name,
       A.aggserialfn::oid as serialization_function_id,
       case when A.aggserialfn::oid = 0 then null else SP.function_name end as serialization_function_name,
       A.aggdeserialfn::oid as deserialization_function_id,
       case when A.aggdeserialfn::oid = 0 then null else DP.function_name end as deserialization_function_name,
       P.proparallel as concurrency_kind
       
from pg_catalog.pg_aggregate A
join pg_catalog.pg_proc P
  on A.aggfnoid = P.oid
join procedures PT
  on A.aggtransfn::oid = PT.function_id
left outer join procedures PF
  on A.aggfinalfn::oid = PF.function_id
left outer join operators O
  on A.aggsortop = O.operator_id
left outer join procedures FTP
  on A.aggmtransfn = FTP.function_id
left outer join procedures ITP
  on A.aggminvtransfn = ITP.function_id
left outer join procedures FFP
  on A.aggmfinalfn = FFP.function_id

left outer join procedures CP
  on A.aggcombinefn = CP.function_id
left outer join procedures SP
  on A.aggserialfn = SP.function_id
left outer join procedures DP
  on A.aggdeserialfn = DP.function_id

where P.pronamespace = ?::oid
--  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(P.xmin) <= pg_catalog.age(:tx::varchar::xid))
order by P.oid
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179704] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179704] finished - execution time: 1 s 17 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179705] 
select O.oid as op_id,
       O.xmin as state_number,
       oprname as op_name,
       oprkind as op_kind,
       oprleft as arg_left_type_id,
       oprright as arg_right_type_id,
       oprresult as arg_result_type_id,
       oprcode as func_main,
       pg_catalog.pg_get_userbyid(O.oprowner) as "owner"
from pg_catalog.pg_operator O
where oprnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179705] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179705] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179706] 
select oid as id,
       xmin as state_number,
       collname as name,
       collcollate as lc_collate,
       collctype as lc_ctype,
       pg_catalog.pg_get_userbyid(collowner) as "owner"
from pg_catalog.pg_collation
where collnamespace = ?::oid
  --  and pg_catalog.age(xmin) <= pg_catalog.age(:tx::varchar::xid)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179706] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179706] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179707] 
with T as ( select distinct T.oid as table_id, T.relname as table_name
            from pg_catalog.pg_class T,
                 pg_catalog.pg_attribute A
            where T.relnamespace = ?::oid
              and T.relkind in ('r', 'm', 'v', 'f', 'p')
              --  and (pg_catalog.age(A.xmin) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid))
              and A.attrelid = T.oid )
select T.table_id,
       C.attnum as column_position,
       C.attname as column_name,
       C.xmin as column_state_number,
       C.atttypmod as type_mod,
       C.attndims as dimensions_number,
       pg_catalog.format_type(C.atttypid, C.atttypmod) as type_spec,
       C.atttypid as type_id,
       C.attnotnull as mandatory,
       pg_catalog.pg_get_expr(D.adbin, T.table_id) /* D.adsrc */ as column_default_expression,
       not C.attislocal as column_is_inherited,
       C.attfdwoptions as options,
       C.attisdropped as column_is_dropped,
       C.attidentity /* null */ as identity_kind
from T
  inner join pg_catalog.pg_attribute C on T.table_id = C.attrelid
  left outer join pg_catalog.pg_attrdef D on (C.attrelid, C.attnum) = (D.adrelid, D.adnum)
where attnum > 0
order by table_id, attnum
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179707] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179707] finished - execution time: 3 ms, fetching time: 3 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179708] 
with tab as ( select relnamespace as schema_id,
                     oid as table_id,
                     relkind as table_kind
              from pg_catalog.pg_class
              where relnamespace = ?::oid
                and relkind in ('r','m','v','p')),
    ind_head as ( select indrelid as table_id,
                         indexrelid as index_id,
                         indisunique as is_unique,
                         indisprimary as is_primary,
                         indkey as column_positions,
                         indclass as column_operators,
                         indoption as column_options,
                         pg_catalog.pg_get_expr(indpred, indrelid) as condition,
                         case when indexprs is not null
                             then pg_catalog.array_to_string(array(
                                      select case when indkey[k] = 0
                                             then chr(27) || pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             else pg_catalog.pg_get_indexdef(indexrelid, k + 1, true)
                                             end
                                      from pg_catalog.generate_subscripts(indkey, 1) as k
                                      order by k),
                                  chr(28))
                             else null end as expressions
                  from pg_catalog.pg_index ),
    ind_stor as ( select cls.relnamespace as schema_id,
                         cls.oid as index_id,
                         cls.xmin as state_number,
                         cls.relname as index_name,
                         pg_catalog.pg_indexam_has_property(cls.relam, 'can_order') /* am.amcanorder */ as can_order
                  from pg_catalog.pg_class cls
                    /* join pg_catalog.pg_am am on (cls.relam = am.oid)*/
                  where cls.relkind = 'i'
                    /* and pg_catalog.age(cls.xmin) <= pg_catalog.age(:tx::varchar::xid) */)
select table_id, table_kind,
       index_name, index_id, state_number,
       is_unique, is_primary,
       column_positions, column_operators, column_options,
       condition, expressions, can_order
from tab natural join ind_head natural join ind_stor
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179708] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179708] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179709] 
with T as ( select oid as table_id,
                   relkind as table_kind,
                   xmin as table_state_id
            from pg_catalog.pg_class
            where relkind in ('r','v','f','p')
              and relnamespace = ?::oid ),
     C as ( select conrelid as table_id,
                   oid::bigint as con_id,
                   xmin as con_state_id,
                   conname as con_name,
                   contype as con_kind,
                   conkey as con_columns,
                   conindid as index_id,
                   confrelid as ref_table_id,
                   confkey as ref_columns,
                   condeferrable as is_deferrable,
                   condeferred as is_init_deferred,
                   confupdtype as on_update,
                   confdeltype as on_delete,
                   conbin /* consrc */
            from pg_catalog.pg_constraint
            where contype in ('p','u','f','c')
              and connamespace = ?::oid )
select table_id,
       table_kind,
       con_id,
       con_state_id::varchar::bigint as con_state_id,
       con_name,
       con_kind,
       con_columns,
       index_id,
       ref_table_id,
       is_deferrable,
       is_init_deferred,
       on_update,
       on_delete,
       pg_catalog.pg_get_expr(conbin, table_id) /* consrc */ as con_expression,
       ref_columns
from T natural join C
--  where pg_catalog.age(table_state_id) <= pg_catalog.age(:tx::varchar::xid) or pg_catalog.age(con_state_id) <= pg_catalog.age(:tx::varchar::xid)
order by pg_catalog.strpos('pufc', con_kind)
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179709] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179709] finished - execution time: 2 ms, fetching time: 2 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179710] 
select R.ev_class as table_id,
       R.oid as rule_id,
       R.xmin as rule_state_number,
       R.rulename as rule_name,
       pg_catalog.translate(ev_type,'1234','SUID') as rule_event_code,
       R.ev_enabled as rule_fire_mode,
       R.is_instead as rule_is_instead
from pg_catalog.pg_rewrite R
where R.ev_class in (select oid
                     from pg_catalog.pg_class
                     where relnamespace = ?::oid)
  --  and pg_catalog.age(R.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and R.rulename != '_RETURN'::name
order by R.ev_class::bigint, ev_type
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179710] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179710] finished - execution time: 2 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179711] 
select T.tgrelid as table_id,
       T.oid as trigger_id,
       T.xmin as trigger_state_number,
       T.tgname as trigger_name,
       T.tgfoid as function_id,
       T.tgtype & 31 as bits,
       T.tgdeferrable as is_deferrable,
       T.tginitdeferred as is_init_deferred,
       T.tgenabled as trigger_fire_mode,
       T.tgattr as columns,
       pg_catalog.pg_get_triggerdef(T.oid, true) as source_code
from pg_catalog.pg_trigger T
where T.tgrelid in (select oid
                    from pg_catalog.pg_class
                    where relnamespace = ?::oid)
  --  and pg_catalog.age(T.xmin) <= pg_catalog.age(:tx::varchar::xid)
  and not T.tgisinternal
-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179711] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179711] finished - execution time: 3 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179712] 
select D.objoid id, C.relkind as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_class C on D.objoid = C.oid
where C.relnamespace = ?::oid and C.relkind != 'c'
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select T.oid id, 'T' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_type T on T.oid = D.objoid or T.typrelid = D.objoid
  left join pg_catalog.pg_class C on T.typrelid = C.oid
where T.typnamespace = ?::oid and (C.relkind = 'c' or C.relkind is null)
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, pg_catalog.translate(C.contype, 'pufc', 'kkxz') as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_constraint C on D.objoid = C.oid
where C.connamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 't' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_trigger T on T.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = T.tgrelid
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'R' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_rewrite R on R.oid = D.objoid
  join pg_catalog.pg_class C on C.oid = R.ev_class
where C.relnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'F' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_proc P on P.oid = D.objoid
where P.pronamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'O' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_operator O on O.oid = D.objoid
where O.oprnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)
union all
select D.objoid id, 'C' as kind, D.objsubid sub_id, D.description
from pg_catalog.pg_description D
  join pg_catalog.pg_collation C on C.oid = D.objoid
where C.collnamespace = ?::oid
--  and pg_catalog.age(D.xmin) <= pg_catalog.age(:tx::varchar::xid)

-- ] --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179712] results received
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179712] finished - execution time: 4 ms, fetching time: 1 ms, total result sets count: 1
-- [ --------------------------------------------------
-- 2020-11-12 01:03:23 [testy2] [PsqlDatabase@localhost] [introspection] [session id: 1567851456] [statement id: 2137179713] 
select distinct
       T.relkind as view_kind,
       T.oid as view_id,
       pg_catalog.pg_get_viewdef(T.oid, true) as source_text
from pg_catalog.pg_class T
  join pg_catalog.pg_namespace N on T.relnamespace = N.oid
  left outer join pg_catalog.pg_attribute A on (A.attrelid = T.oid)
where N.oid = ?::oid
  and T.relkind in ('m','v')
  --  and (pg_catalog.age(T.xmin) <= pg_catalog.age(:src_tx::varchar::xid) or pg_catalog.age(A.xmin) <= pg_catalog.age(:src_tx::varchar::xid))
-- ] --------------------------------------------------
